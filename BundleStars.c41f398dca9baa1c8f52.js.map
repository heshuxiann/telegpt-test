{"version":3,"file":"BundleStars.c41f398dca9baa1c8f52.js","mappings":"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","sources":["webpack://TelyAI/./src/bundles/stars.ts","webpack://TelyAI/./src/components/common/gift/GiftTransferPreview.module.scss?0f0d","webpack://TelyAI/./src/components/common/gift/GiftTransferPreview.tsx","webpack://TelyAI/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://TelyAI/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://TelyAI/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://TelyAI/./src/components/modals/gift/GiftComposer.tsx","webpack://TelyAI/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://TelyAI/./src/components/modals/gift/GiftItemPremium.tsx","webpack://TelyAI/./src/components/modals/gift/GiftItemStar.tsx","webpack://TelyAI/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://TelyAI/./src/components/modals/gift/GiftModal.tsx","webpack://TelyAI/./src/components/modals/gift/GiftModalResaleScreen.tsx","webpack://TelyAI/./src/components/modals/gift/GiftResaleFilters.module.scss?c5a8","webpack://TelyAI/./src/components/modals/gift/GiftResaleFilters.tsx","webpack://TelyAI/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.module.scss?8276","webpack://TelyAI/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.tsx","webpack://TelyAI/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://TelyAI/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://TelyAI/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://TelyAI/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://TelyAI/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://TelyAI/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://TelyAI/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://TelyAI/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://TelyAI/./src/components/modals/gift/resale/GiftResalePriceComposerModal.module.scss?6666","webpack://TelyAI/./src/components/modals/gift/resale/GiftResalePriceComposerModal.tsx","webpack://TelyAI/./src/components/modals/gift/status/GiftStatusInfoModal.module.scss?3366","webpack://TelyAI/./src/components/modals/gift/status/GiftStatusInfoModal.tsx","webpack://TelyAI/./src/components/modals/gift/transfer/GiftTransferModal.tsx","webpack://TelyAI/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://TelyAI/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://TelyAI/./src/components/modals/gift/withdraw/GiftWithdrawModal.module.scss?287b","webpack://TelyAI/./src/components/modals/gift/withdraw/GiftWithdrawModal.tsx","webpack://TelyAI/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://TelyAI/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://TelyAI/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://TelyAI/./src/components/modals/paidReaction/StarSlider.tsx","webpack://TelyAI/./src/components/modals/priceConfirm/PriceConfirmModal.tsx","webpack://TelyAI/./src/components/modals/stars/BalanceBlock.tsx","webpack://TelyAI/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://TelyAI/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://TelyAI/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://TelyAI/./src/components/modals/stars/chatRefund/ChatRefundModal.tsx","webpack://TelyAI/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://TelyAI/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://TelyAI/./src/components/modals/stars/helpers/transaction.ts","webpack://TelyAI/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://TelyAI/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://TelyAI/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://TelyAI/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://TelyAI/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://TelyAI/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://TelyAI/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://TelyAI/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://TelyAI/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215","webpack://TelyAI/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://TelyAI/./src/hooks/useDebouncedMemo.ts","webpack://TelyAI/./src/hooks/usePeerSearch.ts"],"sourcesContent":["export { default as StarsGiftModal } from '../components/modals/stars/gift/StarsGiftModal';\nexport { default as StarsGiftingPickerModal } from '../components/main/premium/StarsGiftingPickerModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\nexport { default as StarsTransactionInfoModal } from '../components/modals/stars/transaction/StarsTransactionModal';\nexport { default as StarsSubscriptionModal } from '../components/modals/stars/subscription/StarsSubscriptionModal';\nexport { default as PaidReactionModal } from '../components/modals/paidReaction/PaidReactionModal';\nexport { default as GiftModal } from '../components/modals/gift/GiftModal';\nexport { default as GiftRecipientPicker } from '../components/modals/gift/recipient/GiftRecipientPicker';\nexport { default as GiftInfoModal } from '../components/modals/gift/info/GiftInfoModal';\nexport { default as GiftResalePriceComposerModal } from '../components/modals/gift/resale/GiftResalePriceComposerModal';\nexport { default as GiftUpgradeModal } from '../components/modals/gift/upgrade/GiftUpgradeModal';\nexport { default as GiftStatusInfoModal } from '../components/modals/gift/status/GiftStatusInfoModal';\nexport { default as GiftWithdrawModal } from '../components/modals/gift/withdraw/GiftWithdrawModal';\nexport { default as GiftTransferModal } from '../components/modals/gift/transfer/GiftTransferModal';\nexport { default as ChatRefundModal } from '../components/modals/stars/chatRefund/ChatRefundModal';\nexport { default as PriceConfirmModal } from '../components/modals/priceConfirm/PriceConfirmModal';\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Ef0cKSqQ\",\"giftPreview\":\"IvuNzslN\",\"backdrop\":\"dNukis4X\",\"arrow\":\"oufsMLLF\"};","import React from '@teact';\nimport { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiPeer, ApiStarGiftUnique,\n} from '../../../api/types';\n\nimport { getGiftAttributes } from '../helpers/gifts';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport AnimatedIconFromSticker from '../AnimatedIconFromSticker';\nimport Avatar from '../Avatar';\nimport Icon from '../icons/Icon';\nimport RadialPatternBackground from '../profile/RadialPatternBackground';\n\nimport styles from './GiftTransferPreview.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer;\n  gift: ApiStarGiftUnique;\n};\n\nconst AVATAR_SIZE = 4 * REM;\nconst GIFT_STICKER_SIZE = 3 * REM;\n\nconst GiftTransferPreview = ({\n  peer,\n  gift,\n}: OwnProps) => {\n  const giftAttributes = useMemo(() => {\n    return getGiftAttributes(gift);\n  }, [gift]);\n\n  if (!giftAttributes) return undefined;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.giftPreview}>\n        <RadialPatternBackground\n          className={styles.backdrop}\n          backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n          patternColor={giftAttributes.backdrop?.patternColor}\n          patternIcon={giftAttributes.pattern?.sticker}\n        />\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          size={GIFT_STICKER_SIZE}\n          sticker={giftAttributes.model?.sticker}\n        />\n      </div>\n      <Icon name=\"next\" className={styles.arrow} />\n      <Avatar\n        peer={peer}\n        size={AVATAR_SIZE}\n        className={styles.avatar}\n      />\n    </div>\n  );\n};\n\nexport default memo(GiftTransferPreview);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"s3k01dTm\",\"transition\":\"BNA0_b5j\",\"main\":\"Oadi16vt\",\"filter\":\"z84KbvhX\",\"title\":\"Jnsrau29\",\"buttons\":\"NnVyYB32\",\"picker\":\"cuI2eDIY\",\"avatars\":\"ILtw_aNL\",\"center\":\"eIfMzHv5\",\"description\":\"FlNJWZ5P\",\"premiumFeatures\":\"xIv0Yaur\",\"options\":\"eNJRXn6P\",\"button\":\"KDNKXBp5\"};","import React from '@teact';\nimport type { FC } from '../../../lib/teact/teact';\nimport {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { filterPeersByQuery } from '../../../global/helpers/peers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = unique([\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ]);\n\n    const filteredUserIds = filterPeersByQuery({\n      ids: combinedIds, query: searchQuery, type: 'user',\n    });\n\n    return sortChatIds(filteredUserIds.filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jKOG0It6\",\"header\":\"A_fX4EXY\",\"spacer\":\"ATowWJ60\",\"title\":\"gDNtv9oz\",\"balance-container\":\"eAKZVhOT\",\"balanceContainer\":\"eAKZVhOT\",\"balance-caption\":\"vbwprYel\",\"balanceCaption\":\"vbwprYel\",\"star-balance\":\"lXuIlbVK\",\"starBalance\":\"lXuIlbVK\",\"balance\":\"dIEx_Iqi\",\"optionsSection\":\"Y68CEIKn\",\"checkboxTitle\":\"H4taXei_\",\"actionMessageView\":\"CB1mxsgp\",\"messageInput\":\"o5r2IPoA\",\"limited\":\"mWzLu0c0\",\"footer\":\"jxWZSvet\",\"switcher\":\"zZUpGRSI\",\"switcherStarIcon\":\"zAee80Dv\",\"description\":\"nTPAv1ci\",\"main-button\":\"IDuhjrne\",\"mainButton\":\"IDuhjrne\",\"star\":\"Q4NlMT0o\",\"background\":\"ZORVRSG3\",\"customBgImage\":\"Eny_G3JI\",\"customBgColor\":\"TkJZPU2u\",\"withTransition\":\"soDpW2YR\",\"blurred\":\"M6k91TdM\",\"withRightColumn\":\"FBcNO8hj\"};","import React from '@teact';\nimport type { ChangeEvent } from 'react';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\nimport {\n  type ApiMessage, type ApiPeer, type ApiStarsAmount, MAIN_THREAD_ID,\n} from '../../../api/types';\n\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectPeer, selectPeerPaidMessagesStars, selectTabState, selectTheme, selectThemeValues, selectUserFullInfo,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/message/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  giftByStars?: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n  starBalance?: ApiStarsAmount;\n  paidMessagesStars?: number;\n  areUniqueStarGiftsDisallowed?: boolean;\n  shouldDisallowLimitedStarGifts?: boolean;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\n\nfunction GiftComposer({\n  gift,\n  giftByStars,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n  starBalance,\n  paidMessagesStars,\n  areUniqueStarGiftsDisallowed,\n  shouldDisallowLimitedStarGifts,\n}: OwnProps & StateProps) {\n  const {\n    sendStarGift, sendPremiumGiftByStars, openInvoice, openGiftUpgradeModal, openStarsBalanceModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n  const [shouldPayByStars, setShouldPayByStars] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  useEffect(() => {\n    if (shouldDisallowLimitedStarGifts) {\n      setShouldPayForUpgrade(true);\n    }\n  }, [shouldDisallowLimitedStarGifts, shouldPayForUpgrade]);\n\n  const isStarGift = 'id' in gift && gift.type === 'starGift';\n  const isPremiumGift = 'months' in gift;\n  const hasPremiumByStars = giftByStars && 'amount' in giftByStars;\n  const isPeerUser = peer && isApiPeerUser(peer);\n  const isSelf = peerId === currentUserId;\n\n  const localMessage = useMemo(() => {\n    if (isPremiumGift) {\n      const currentGift = shouldPayByStars && hasPremiumByStars ? giftByStars : gift;\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'giftPremium',\n            amount: currentGift.amount,\n            currency: currentGift.currency,\n            months: gift.months,\n            message: giftMessage ? { text: giftMessage } : undefined,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    if (isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'starGift',\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName || undefined,\n            starsToConvert: gift.starsToConvert,\n            canUpgrade: shouldPayForUpgrade || undefined,\n            alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n            gift,\n            peerId,\n            fromId: currentUserId,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n    return undefined;\n  }, [currentUserId, gift, giftMessage, isStarGift,\n    shouldHideName, shouldPayForUpgrade, peerId,\n    shouldPayByStars, hasPremiumByStars, giftByStars, isPremiumGift]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const toggleShouldPayByStars = useLastCallback(() => {\n    if (hasPremiumByStars) setShouldPayByStars(!shouldPayByStars);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleGetMoreStars = useLastCallback(() => {\n    openStarsBalanceModal({});\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    if (shouldPayByStars && hasPremiumByStars) {\n      sendPremiumGiftByStars({\n        userId: peerId,\n        months: giftByStars.months,\n        amount: giftByStars.amount,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n      return;\n    }\n\n    if (isPremiumGift) {\n      openInvoice({\n        type: 'giftcode',\n        userIds: [peerId],\n        currency: gift.currency,\n        amount: gift.amount,\n        option: gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n    }\n  });\n\n  const canUseStarsPayment = hasPremiumByStars && starBalance && (starBalance.amount > giftByStars.amount);\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n\n        {!paidMessagesStars && (\n          <TextArea\n            className={styles.messageInput}\n            onChange={handleGiftMessageChange}\n            value={giftMessage}\n            label={lang('GiftMessagePlaceholder')}\n            maxLength={captionLimit}\n            maxLengthIndicator={\n              symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined\n            }\n          />\n        )}\n\n        {canUseStarsPayment && (\n          <ListItem className={styles.switcher} narrow ripple onClick={toggleShouldPayByStars}>\n            <span>\n              {lang('GiftPremiumPayWithStars', {\n                stars: formatStarsAsIcon(lang, giftByStars.amount, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayByStars}\n              onChange={toggleShouldPayByStars}\n              label={lang('GiftPremiumPayWithStarsAcc')}\n            />\n          </ListItem>\n        )}\n\n        {hasPremiumByStars && starBalance && (\n          <div className={styles.description}>\n            {lang('GiftPremiumDescriptionYourBalance', {\n              stars: formatStarsAsIcon(lang, starBalance.amount, { className: styles.switcherStarIcon }),\n              link: <Link isPrimary onClick={handleGetMoreStars}>{lang('GetMoreStarsLinkText')}</Link>,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n        )}\n\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <ListItem\n            className={styles.switcher}\n            narrow\n            ripple\n            onClick={handleShouldPayForUpgradeChange}\n            disabled={shouldDisallowLimitedStarGifts}\n          >\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isSelf ? lang('GiftHideNameDescriptionSelf')\n              : isPeerUser ? lang('GiftHideNameDescription', { receiver: title })\n                : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = shouldPayByStars && hasPremiumByStars\n      ? formatStarsAsIcon(lang, giftByStars.amount, { asFont: true })\n      : isStarGift\n        ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n        : isPremiumGift ? formatCurrency(lang, gift.amount, gift.currency) : undefined;\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && Boolean(gift.availabilityRemains) && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        <Button\n          className={styles.mainButton}\n          size=\"smaller\"\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n        >\n          {lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  if ((!isStarGift && !isPremiumGift) || !localMessage) return;\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage\n          key={isStarGift ? gift.id : isPremiumGift ? gift.months : undefined}\n          message={localMessage}\n          threadId={MAIN_THREAD_ID}\n          appearanceOrder={0}\n        />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId }): StateProps => {\n    const theme = selectTheme(global);\n    const {\n      stars,\n    } = global;\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = selectThemeValues(global, theme) || {};\n    const peer = selectPeer(global, peerId);\n    const paidMessagesStars = selectPeerPaidMessagesStars(global, peerId);\n    const userFullInfo = selectUserFullInfo(global, peerId);\n    const currentUserId = global.currentUserId;\n    const isGiftForSelf = currentUserId === peerId;\n    const areUniqueStarGiftsDisallowed = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowUniqueStarGifts;\n    const shouldDisallowLimitedStarGifts = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n    const tabState = selectTabState(global);\n\n    return {\n      starBalance: stars?.balance,\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig?.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n      paidMessagesStars,\n      areUniqueStarGiftsDisallowed,\n      shouldDisallowLimitedStarGifts,\n    };\n  },\n)(GiftComposer));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"G1mBmzxs\",\"starGift\":\"f5ArEO1S\",\"monthsDescription\":\"rn9aWFNA\",\"description\":\"q4_ydkAx\",\"buy\":\"a8no5WH0\",\"star\":\"DvJLTVFU\",\"premiumRequired\":\"NBYIITte\",\"amount\":\"sbo2dMcH\",\"starsPriceBlock\":\"QB5SI7ta\",\"starsPriceIcon\":\"jgnEfoeM\",\"radialPattern\":\"Nkotr8Q4\",\"stickerWrapper\":\"rUSoeQXb\"};","import React from '@teact';\nimport { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  optionByStars?: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, optionByStars, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {optionByStars && (\n        <div className={styles.starsPriceBlock}>\n          {lang('GiftPremiumStarsPrice', {\n            stars: (formatStarsAsIcon(lang, optionByStars.amount, { className: styles.starsPriceIcon })),\n          }, { withNodes: true, withMarkdown: true })}\n        </div>\n      )}\n      {Boolean(discount) && (\n        <GiftRibbon color=\"purple\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): StateProps => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import React from '@teact';\nimport { memo, useMemo, useRef, useState } from '@teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarGift, ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { selectIsCurrentUserPremium } from '../../../global/selectors';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon, formatTonAsIcon } from '../../../util/localization/format';\nimport { getGiftAttributes, getStickerFromGift } from '../../common/helpers/gifts';\n\nimport useFlag from '../../../hooks/useFlag.ts';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport StickerView from '../../common/StickerView';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGift;\n  observeIntersection?: ObserveFn;\n  onClick: (gift: ApiStarGift, target: 'original' | 'resell') => void;\n  isResale?: boolean;\n};\n\ntype StateProps = {\n  isCurrentUserPremium?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({\n  gift, observeIntersection, onClick, isResale, isCurrentUserPremium,\n}: OwnProps & StateProps) {\n  const { openGiftInfoModal, openPremiumModal, showNotification } = getActions();\n\n  const ref = useRef<HTMLDivElement>();\n  const stickerRef = useRef<HTMLDivElement>();\n\n  function getPriceAmount(amounts?: ApiTypeCurrencyAmount[]) {\n    if (!amounts) return { amount: 0, currency: STARS_CURRENCY_CODE };\n\n    if (gift.type === 'starGiftUnique' && gift.resaleTonOnly) {\n      const tonAmount = amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n      if (tonAmount) return tonAmount;\n    }\n\n    const starsAmount = amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n    return starsAmount;\n  }\n\n  const lang = useLang();\n\n  const [isVisible, setIsVisible] = useState(false);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  const sticker = getStickerFromGift(gift);\n  const isGiftUnique = gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n  const regularGift = !isGiftUnique ? gift : undefined;\n\n  const priceInfo = !isGiftUnique\n    ? { amount: regularGift?.stars || 0, currency: STARS_CURRENCY_CODE }\n    : getPriceAmount(uniqueGift?.resellPrice);\n  const priceCurrency = priceInfo?.currency || STARS_CURRENCY_CODE;\n  const resellMinStars = regularGift?.resellMinStars;\n  const priceInStarsAsString = !isGiftUnique && isResale && resellMinStars\n    ? lang.number(resellMinStars) + '+' : priceInfo?.amount || 0;\n  const isLimited = !isGiftUnique && Boolean(regularGift?.isLimited);\n  const isSoldOut = !isGiftUnique && Boolean(regularGift?.isSoldOut);\n  const isPremiumRequired = Boolean(gift?.requirePremium);\n  const isUserLimitReached = Boolean(regularGift?.limitedPerUser && !regularGift?.perUserRemains);\n  const perUserTotal = regularGift?.perUserTotal;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isSoldOut && !isResale) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    if (isUserLimitReached) {\n      showNotification({\n        message: lang('NotificationGiftsLimit', {\n          count: perUserTotal,\n        }, {\n          withMarkdown: true,\n          withNodes: true,\n        }),\n      });\n      return;\n    }\n\n    if (isPremiumRequired && !isCurrentUserPremium) {\n      openPremiumModal({\n        gift,\n      });\n      return;\n    }\n\n    onClick(gift, isResale ? 'resell' : 'original');\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    const { backdrop, pattern } = getGiftAttributes(gift) || {};\n\n    if (!backdrop || !pattern) {\n      return undefined;\n    }\n\n    const backdropColors = [backdrop.centerColor, backdrop.edgeColor];\n    const patternColor = backdrop.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={pattern.sticker}\n      />\n    );\n  }, [gift]);\n\n  const giftNumber = isGiftUnique ? gift.number : 0;\n\n  const giftRibbon = useMemo(() => {\n    if (isGiftUnique) {\n      const { backdrop } = getGiftAttributes(gift) || {};\n      if (!backdrop) {\n        return undefined;\n      }\n      return (\n        <GiftRibbon\n          color={[backdrop.centerColor, backdrop.edgeColor]}\n          text={\n            lang('GiftSavedNumber', { number: giftNumber })\n          }\n        />\n      );\n    }\n    if (isPremiumRequired) {\n      return <GiftRibbon color=\"orange\" text={lang('LimitPremium')} />;\n    }\n    if (isResale) {\n      return <GiftRibbon color=\"green\" text={lang('GiftRibbonResale')} />;\n    }\n    if (isSoldOut) {\n      return <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />;\n    }\n    if (isLimited) {\n      return <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />;\n    }\n    return undefined;\n  }, [isGiftUnique, isResale, gift, isSoldOut, isLimited, lang, giftNumber, isPremiumRequired]);\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    const visible = entry.isIntersecting;\n    setIsVisible(visible);\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        'interactive-gift',\n        styles.container,\n        styles.starGift,\n        'starGiftItem',\n        isPremiumRequired && styles.premiumRequired,\n      )}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n      onMouseEnter={!IS_TOUCH_ENV ? markHover : undefined}\n      onMouseLeave={!IS_TOUCH_ENV ? unmarkHover : undefined}\n    >\n      {radialPatternBackdrop}\n\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${GIFT_STICKER_SIZE}px; height: ${GIFT_STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            observeIntersectionForPlaying={observeIntersection}\n            observeIntersectionForLoading={observeIntersection}\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={GIFT_STICKER_SIZE}\n            shouldLoop={isHover}\n            shouldPreloadPreview\n          />\n        )}\n\n      </div>\n      <Button\n        className={styles.buy}\n        nonInteractive\n        size=\"tiny\"\n        color={isGiftUnique ? 'bluredStarsBadge' : 'stars'}\n        withSparkleEffect={isVisible}\n        pill\n        fluid\n      >\n        {priceCurrency === TON_CURRENCY_CODE\n          ? formatTonAsIcon(lang, priceInStarsAsString || 0, { shouldConvertFromNanos: true, className: styles.star })\n          : formatStarsAsIcon(lang, priceInStarsAsString || 0, { asFont: true, className: styles.star })}\n      </Button>\n      {giftRibbon}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      isCurrentUserPremium,\n    };\n  })(GiftItemStar),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"tJK1W0pJ\",\"transition\":\"pP8TxefR\",\"content\":\"o3V1HqbL\",\"resaleScreenRoot\":\"Vce_TsJO\",\"main\":\"cVXqeu9P\",\"giftSection\":\"v4eKefwN\",\"section\":\"EqfarEYb\",\"resaleStarGiftsContainer\":\"RSFcSNGL\",\"starGiftsContainer\":\"OQX3GZl5\",\"premiumGiftsGallery\":\"n40m3BK2\",\"header\":\"iqqoyRgW\",\"resaleHeader\":\"cJRBgg9B\",\"resaleHeaderContentContainer\":\"OXYQmfGK\",\"headerSlide\":\"BTWhJUQB\",\"headerText\":\"lLRmbpIu\",\"hiddenHeader\":\"XgGzn1cQ\",\"resaleHeaderText\":\"bp_KPx8I\",\"commonHeaderText\":\"ybZo03if\",\"resaleHeaderDescription\":\"XefHUFm1\",\"closeButton\":\"r_Y5uG1T\",\"balance\":\"soqAknia\",\"avatars\":\"N_7tYJKr\",\"avatar\":\"_3hY4vIep\",\"logoBackground\":\"ieK4TzSb\",\"center\":\"Ey5gX40t\",\"description\":\"ZioU5h_k\",\"starGiftsDescription\":\"gFgzS8pV\",\"boostIcon\":\"Qi2YR6Dz\",\"optionBottom\":\"RTbClMKE\",\"secondaryInfo\":\"g0R9GSNq\",\"footer\":\"J3Gju3bv\",\"starGiftsTransition\":\"kB6IyXqS\",\"notFoundGiftsRoot\":\"UqnRlJ1n\",\"notFoundGiftsDescription\":\"g0VbwIG_\",\"notFoundGiftsLink\":\"j2zPEQr8\"};","import React from '@teact';\nimport type { FC } from '@teact';\nimport {\n  memo, useEffect, useMemo, useRef, useState,\n} from '@teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiDisallowedGifts,\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiStarGift,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectTabState } from '../../../global/selectors';\nimport { selectPeer, selectUserFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport InteractiveSparkles from '../../common/InteractiveSparkles';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftSendingOptions from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport GiftModalResaleScreen from './GiftModalResaleScreen';\nimport GiftResaleFilters from './GiftResaleFilters';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGift;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  isSelf?: boolean;\n  disallowedGifts?: ApiDisallowedGifts;\n  resaleGiftsCount?: number;\n  areResaleGiftsLoading?: boolean;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst GiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  starBalance,\n  peer,\n  isSelf,\n  disallowedGifts,\n  resaleGiftsCount,\n  areResaleGiftsLoading,\n}) => {\n  const {\n    closeGiftModal, openGiftInfoModal, resetResaleGifts, loadResaleGifts,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n  const transitionRef = useRef<HTMLDivElement>();\n  const giftHeaderRef = useRef<HTMLHeadingElement>();\n\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const user = peer && isApiPeerUser(peer) ? peer : undefined;\n  const chat = peer && isApiPeerChat(peer) ? peer : undefined;\n\n  const [selectedGift, setSelectedGift] = useState<GiftOption | undefined>();\n  const [selectedResellGift, setSelectedResellGift] = useState<ApiStarGift | undefined>();\n  const [shouldShowMainScreenHeader, setShouldShowMainScreenHeader] = useState(false);\n  const [isMainScreenHeaderForStarGifts, setIsMainScreenHeaderForStarGifts] = useState(false);\n  const [isGiftScreenHeaderForStarGifts, setIsGiftScreenHeaderForStarGifts] = useState(false);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const areAllGiftsDisallowed = useMemo(() => {\n    if (!disallowedGifts) {\n      return undefined;\n    }\n    const {\n      shouldDisallowPremiumGifts,\n      ...disallowedGiftTypes\n    } = disallowedGifts;\n    return !isSelf && Object.values(disallowedGiftTypes).every(Boolean);\n  }, [isSelf, disallowedGifts]);\n\n  const areUnlimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUnlimitedStarGifts;\n  const areLimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const allGifts = renderingModal?.gifts;\n  const filteredGifts = useMemo(() => {\n    return allGifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1 && gift.currency !== STARS_CURRENCY_CODE);\n  }, [allGifts]);\n\n  const giftsByStars = useMemo(() => {\n    const mapGifts = new Map();\n\n    if (!filteredGifts) return mapGifts;\n\n    filteredGifts.forEach((gift) => {\n      const giftByStars = allGifts?.find(\n        (starsGift) => starsGift.currency === STARS_CURRENCY_CODE\n          && starsGift.months === gift.months,\n      );\n      if (giftByStars) {\n        mapGifts.set(gift, giftByStars);\n      }\n    });\n\n    return mapGifts;\n  }, [allGifts, filteredGifts]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const isResaleScreen = Boolean(selectedResellGift) && !selectedGift;\n  const isGiftScreen = Boolean(selectedGift);\n  const shouldShowHeader = isResaleScreen || isGiftScreen || shouldShowMainScreenHeader;\n  const isHeaderForStarGifts = isGiftScreen ? isGiftScreenHeaderForStarGifts : isMainScreenHeaderForStarGifts;\n\n  useEffect(() => {\n    if (selectedResellGift) {\n      loadResaleGifts({ giftId: selectedResellGift.id });\n    }\n  }, [selectedResellGift]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setShouldShowMainScreenHeader(false);\n      setSelectedGift(undefined);\n      setSelectedResellGift(undefined);\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (isGiftScreen) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setShouldShowMainScreenHeader(scrollTop > 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsMainScreenHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = chat\n    ? lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n      withNodes: true,\n      withMarkdown: true,\n    })\n    : isSelf\n      ? lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      })\n      : lang('StarGiftDescription', {\n        user: getUserFullName(user)!,\n      }, { withNodes: true, withMarkdown: true });\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption, target?: 'resell' | 'original') => {\n    if (target === 'resell') {\n      if (!('id' in gift)) {\n        return;\n      }\n      if (isResaleScreen) {\n        openGiftInfoModal({ gift, recipientId: renderingModal?.forPeerId });\n        return;\n      }\n      setSelectedResellGift(gift);\n      return;\n    }\n    setSelectedGift(gift);\n    setIsGiftScreenHeaderForStarGifts('id' in gift);\n  });\n\n  function renderStarGifts() {\n    const filteredGiftIds = starGiftIdsByCategory?.[selectedCategory]?.filter((giftId) => {\n      const gift = starGiftsById?.[giftId];\n      if (!gift) return false;\n\n      const { isLimited, isSoldOut, upgradeStars } = gift;\n      if (areUnlimitedStarGiftsDisallowed && !areLimitedStarGiftsDisallowed) {\n        return isLimited;\n      }\n      if (areLimitedStarGiftsDisallowed && !areUnlimitedStarGiftsDisallowed) {\n        return !isLimited && !isSoldOut;\n      }\n      if (areUnlimitedStarGiftsDisallowed && areLimitedStarGiftsDisallowed) {\n        return Boolean(isLimited && Boolean(upgradeStars));\n      }\n\n      return true;\n    });\n\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && filteredGiftIds?.flatMap((giftId) => {\n          const gift = starGiftsById[giftId];\n          const shouldShowResale = selectedCategory !== 'stock' && Boolean(gift.availabilityResale);\n          const shouldDuplicateAsResale = selectedCategory !== 'resale' && shouldShowResale && !gift.isSoldOut;\n\n          const elements = [\n            <GiftItemStar\n              key={giftId}\n              gift={gift}\n              observeIntersection={observeIntersection}\n              isResale={shouldShowResale && !shouldDuplicateAsResale}\n              onClick={handleGiftClick}\n            />,\n          ];\n\n          if (shouldDuplicateAsResale) {\n            elements.push(\n              <GiftItemStar\n                key={`resale_${giftId}`}\n                isResale\n                gift={gift}\n                observeIntersection={observeIntersection}\n                onClick={handleGiftClick}\n              />,\n            );\n          }\n\n          return elements;\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              optionByStars={giftsByStars.get(gift)}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseModal = useLastCallback(() => {\n    setSelectedGift(undefined);\n    setSelectedResellGift(undefined);\n    resetResaleGifts();\n    closeGiftModal();\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (isResaleScreen) {\n      setSelectedResellGift(undefined);\n      resetResaleGifts();\n      return;\n    }\n    if (isGiftScreen) {\n      setSelectedGift(undefined);\n      return;\n    }\n    handleCloseModal();\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            className={styles.avatar}\n            size={AVATAR_SIZE}\n            peer={peer}\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <InteractiveSparkles\n            className={styles.logoBackground}\n            color=\"gold\"\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n            onRequestAnimation={handleRequestAnimation}\n          />\n        </div>\n        {!isSelf && !chat && !disallowedGifts?.shouldDisallowPremiumGifts && (\n          <>\n            {renderGiftPremiumHeader()}\n            {renderGiftPremiumDescription()}\n            {renderPremiumGifts()}\n          </>\n        )}\n\n        {!areAllGiftsDisallowed && (\n          <>\n            {renderStarGiftsHeader()}\n            {renderStarGiftsDescription()}\n            <StarGiftCategoryList\n              areLimitedStarGiftsDisallowed={areLimitedStarGiftsDisallowed}\n              onCategoryChanged={onCategoryChanged}\n            />\n            <Transition\n              name=\"zoomFade\"\n              activeKey={getCategoryKey(selectedCategory)}\n              className={styles.starGiftsTransition}\n            >\n              {renderStarGifts()}\n            </Transition>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  const isBackButton = isGiftScreen || isResaleScreen;\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  function renderHeader() {\n    if (!shouldShowHeader) return undefined;\n    if (isResaleScreen) {\n      const isFirstLoading = areResaleGiftsLoading && !resaleGiftsCount;\n      return (\n        <div className={styles.resaleHeaderContentContainer}>\n          <h2 className={styles.resaleHeaderText}>\n            {selectedResellGift.title}\n          </h2>\n          {isFirstLoading\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('Loading')}\n              </div>\n            )}\n          {!isFirstLoading && resaleGiftsCount !== undefined\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('HeaderDescriptionResaleGifts', {\n                  count: resaleGiftsCount,\n                }, { withNodes: true, withMarkdown: true, pluralValue: resaleGiftsCount })}\n              </div>\n            )}\n          <GiftResaleFilters dialogRef={dialogRef} />\n        </div>\n      );\n    }\n    return (\n      <h2 className={styles.commonHeaderText}>\n        {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={handleCloseModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n      isLowStackPriority\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} withAddButton />\n      <div className={buildClassName(\n        styles.header,\n        isResaleScreen && styles.resaleHeader,\n        !shouldShowHeader && styles.hiddenHeader)}\n      >\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={!shouldShowHeader ? 0 : isResaleScreen ? 1 : isHeaderForStarGifts ? 2 : 3}\n          slideClassName={styles.headerSlide}\n        >\n          {renderHeader()}\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={isGiftScreen ? 1 : isResaleScreen ? 2 : 0}\n      >\n        {!isGiftScreen && !isResaleScreen && renderMainScreen()}\n        {isResaleScreen && selectedResellGift\n          && (\n            <GiftModalResaleScreen\n              onGiftClick={handleGiftClick}\n            />\n          )}\n        {isGiftScreen && renderingModal?.forPeerId && (\n          <GiftSendingOptions\n            gift={selectedGift}\n            giftByStars={giftsByStars.get(selectedGift)}\n            peerId={renderingModal.forPeerId}\n          />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const isSelf = Boolean(currentUserId && modal?.forPeerId === currentUserId);\n  const userFullInfo = peer ? selectUserFullInfo(global, peer?.id) : undefined;\n\n  const { resaleGifts } = selectTabState(global);\n  const resaleGiftsCount = resaleGifts.count;\n  const areResaleGiftsLoading = resaleGifts.isLoading !== false;\n\n  return {\n    boostPerSentGift: global.appConfig?.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    starBalance: stars?.balance,\n    peer,\n    isSelf,\n    disallowedGifts: userFullInfo?.disallowedGifts,\n    resaleGiftsCount,\n    areResaleGiftsLoading,\n  };\n})(GiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return 0;\n  if (category === 'limited') return 1;\n  if (category === 'resale') return 2;\n  if (category === 'stock') return 3;\n  return category + 3;\n}\n","import React from '@teact';\nimport type { FC } from '../../../lib/teact/teact';\nimport {\n  memo,\n  useMemo,\n  useRef } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGift,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions } from '../../../types';\n\nimport { RESALE_GIFTS_LIMIT } from '../../../config';\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useInfiniteScroll from '../../../hooks/useInfiniteScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../common/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Link from '../../ui/Link';\nimport Transition from '../../ui/Transition';\nimport GiftItemStar from './GiftItemStar';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  onGiftClick: (gift: ApiStarGift) => void;\n};\n\ntype StateProps = {\n  gift?: ApiStarGift;\n  resellGifts?: ApiStarGift[];\n  filter: ResaleGiftsFilterOptions;\n  areGiftsAllLoaded?: boolean;\n  areGiftsLoading?: boolean;\n  updateIteration: number;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst GiftModalResaleScreen: FC<OwnProps & StateProps> = ({\n  resellGifts,\n  gift,\n  filter,\n  areGiftsAllLoaded,\n  areGiftsLoading,\n  updateIteration,\n  onGiftClick,\n}) => {\n  const {\n    loadResaleGifts,\n    updateResaleGiftsFilter,\n  } = getActions();\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const resellGiftsIds = useMemo(() => {\n    return resellGifts?.map((g) => g.id);\n  }, [resellGifts]);\n\n  const hasFilter = Boolean(filter?.modelAttributes?.length\n    || filter?.patternAttributes?.length || filter?.backdropAttributes?.length);\n\n  const handleLoadMoreResellGifts = useLastCallback(() => {\n    if (gift) {\n      loadResaleGifts({ giftId: gift.id });\n    }\n  });\n\n  const isGiftsEmpty = Boolean(!resellGifts || resellGifts.length === 0);\n\n  const [viewportIds, onLoadMore] = useInfiniteScroll(\n    handleLoadMoreResellGifts,\n    resellGiftsIds,\n    !gift,\n    RESALE_GIFTS_LIMIT,\n  );\n\n  const { observe } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE });\n\n  const handleResetGiftsFilter = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n      backdropAttributes: [],\n      patternAttributes: [],\n    } });\n  });\n\n  function renderNothingFoundGiftsWithFilter() {\n    return (\n      <div className={styles.notFoundGiftsRoot}>\n        <AnimatedIconWithPreview\n          size={160}\n          tgsUrl={LOCAL_TGS_URLS.SearchingDuck}\n          nonInteractive\n          noLoop\n        />\n        <div className={styles.notFoundGiftsDescription}>\n          {lang('ResellGiftsNoFound')}\n        </div>\n        {hasFilter && (\n          <Link\n            className={styles.notFoundGiftsLink}\n            onClick={handleResetGiftsFilter}\n          >\n            {lang('ResellGiftsClearFilters')}\n          </Link>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div ref={scrollerRef} className={buildClassName(styles.resaleScreenRoot, 'custom-scroll')}>\n      <Transition\n        name=\"zoomFade\"\n        activeKey={updateIteration}\n      >\n        {isGiftsEmpty && areGiftsAllLoaded && renderNothingFoundGiftsWithFilter()}\n        <InfiniteScroll\n          className={buildClassName(styles.resaleStarGiftsContainer)}\n          items={viewportIds}\n          onLoadMore={onLoadMore}\n          itemSelector=\".starGiftItem\"\n          noFastList\n          preloadBackwards={RESALE_GIFTS_LIMIT}\n          scrollContainerClosest={`.${styles.resaleScreenRoot}`}\n        >\n          {resellGifts?.map((gift) => (\n            <GiftItemStar\n              key={gift.id}\n              gift={gift}\n              observeIntersection={observe}\n              isResale\n              onClick={onGiftClick}\n            />\n          ))}\n        </InfiniteScroll>\n      </Transition>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    starGifts,\n  } = global;\n\n  const { resaleGifts } = selectTabState(global);\n  const gift = resaleGifts?.giftId ? starGifts?.byId[resaleGifts.giftId] : undefined;\n  const filter = resaleGifts.filter;\n  const areGiftsAllLoaded = resaleGifts.isAllLoaded;\n  const areGiftsLoading = resaleGifts.isLoading;\n  const updateIteration = resaleGifts.updateIteration;\n\n  return {\n    resellGifts: resaleGifts.gifts,\n    gift,\n    filter,\n    areGiftsAllLoaded,\n    areGiftsLoading,\n    updateIteration,\n  };\n})(GiftModalResaleScreen));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_VgmQnUg\",\"buttonsContainer\":\"IDlp6U6g\",\"itemIcon\":\"yuctLnuR\",\"sticker\":\"VT562JS0\",\"backdropAttributeMenuItemText\":\"D50wFfRL\",\"menuItemStickerText\":\"THcGWXSA\",\"menuItemText\":\"L6EVE2Ux\",\"backdrop\":\"A29QNxKb\",\"menuItemIcon\":\"GL4rVsev\",\"item\":\"qiYcBOYc\",\"menuContentContainer\":\"EDsBn29z\",\"menu\":\"ISaNdBwd\",\"left\":\"e4Kkh_MR\",\"right\":\"Kz_nCGC3\"};","import React from '@teact';\nimport { type MouseEvent as ReactMouseEvent } from 'react';\nimport type { ElementRef, FC } from '../../../lib/teact/teact';\nimport {\n  memo,\n  useCallback,\n  useMemo,\n  useRef,\n  useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeCounter,\n  ApiStarGiftAttributeIdBackdrop,\n  ApiStarGiftAttributeIdPattern,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  StarGiftAttributeIdModel,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions, ResaleGiftsSortType } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useContextMenuHandlers from '../../../hooks/useContextMenuHandlers';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Icon from '../../common/icons/Icon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Menu from '../../ui/Menu';\nimport MenuItem from '../../ui/MenuItem';\nimport SearchInput from '../../ui/SearchInput';\nimport ResaleGiftMenuAttributeSticker from './ResaleGiftMenuAttributeSticker';\n\nimport styles from './GiftResaleFilters.module.scss';\n\ntype OwnProps = {\n  dialogRef: ElementRef<HTMLDivElement>;\n};\ntype StateProps = {\n  filter: ResaleGiftsFilterOptions;\n  attributes?: ApiStarGiftAttribute[];\n  counters?: ApiStarGiftAttributeCounter[];\n};\n\nconst GiftResaleFilters: FC<StateProps & OwnProps> = ({\n  attributes,\n  counters,\n  filter,\n  dialogRef,\n}) => {\n  const lang = useLang();\n  const {\n    updateResaleGiftsFilter,\n  } = getActions();\n\n  const [searchModelQuery, setSearchModelQuery] = useState('');\n  const [searchBackdropQuery, setSearchBackdropQuery] = useState('');\n  const [searchPatternQuery, setSearchPatternQuery] = useState('');\n  const filteredAttributes = useMemo(() => {\n    const map: {\n      model: ApiStarGiftAttributeModel[];\n      pattern: ApiStarGiftAttributePattern[];\n      backdrop: ApiStarGiftAttributeBackdrop[];\n    } = {\n      model: [],\n      pattern: [],\n      backdrop: [],\n    };\n\n    for (const counter of counters ?? []) {\n      const { attribute } = counter;\n\n      if (!counter.count) {\n        continue;\n      }\n\n      const found = attributes?.find((attr) => {\n        if (attr.type === 'backdrop' && attribute.type === 'backdrop') {\n          return attr.backdropId === attribute.backdropId;\n        }\n\n        if (attr.type === 'model' && attribute.type === 'model') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        if (attr.type === 'pattern' && attribute.type === 'pattern') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        return false;\n      });\n\n      if (found?.type === 'backdrop') {\n        map.backdrop.push(found);\n      }\n      if (found?.type === 'model') {\n        map.model.push(found);\n      }\n      if (found?.type === 'pattern') {\n        map.pattern.push(found);\n      }\n    }\n\n    return map;\n  }, [attributes, counters]);\n\n  const filteredAndSearchedAttributes = useMemo(() => {\n    const filterBySearch = <T extends { name?: string }>(items: T[], query: string): T[] => {\n      if (!query.trim()) return items;\n\n      return items.filter(\n        (item): item is T => Boolean(item.name?.toLowerCase().includes(query.toLowerCase())),\n      );\n    };\n\n    return {\n      model: filterBySearch(filteredAttributes.model, searchModelQuery),\n      pattern: filterBySearch(filteredAttributes.pattern, searchPatternQuery),\n      backdrop: filterBySearch(filteredAttributes.backdrop, searchBackdropQuery),\n    };\n  }, [filteredAttributes, searchModelQuery, searchBackdropQuery, searchPatternQuery]);\n\n  // Sort Menu\n  const sortMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isSortContextMenuOpen,\n    contextMenuAnchor: sortContextMenuAnchor,\n    handleContextMenu: handleSortContextMenu,\n    handleContextMenuClose: handleSortContextMenuClose,\n    handleContextMenuHide: handleSortContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getSortMenuElement = useLastCallback(() => sortMenuRef.current!);\n\n  // Model Menu\n  const modelMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isModelContextMenuOpen,\n    contextMenuAnchor: modelContextMenuAnchor,\n    handleContextMenu: handleModelContextMenu,\n    handleContextMenuClose: handleModelContextMenuClose,\n    handleContextMenuHide: handleModelContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getModelMenuElement = useLastCallback(\n    () => modelMenuRef.current!,\n  );\n\n  // Backdrop Menu\n  const backdropMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isBackdropContextMenuOpen,\n    contextMenuAnchor: backdropContextMenuAnchor,\n    handleContextMenu: handleBackdropContextMenu,\n    handleContextMenuClose: handleBackdropContextMenuClose,\n    handleContextMenuHide: handleBackdropContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getBackdropMenuElement = useLastCallback(() => backdropMenuRef.current!);\n\n  // Pattern Menu\n  const patternMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isPatternContextMenuOpen,\n    contextMenuAnchor: patternContextMenuAnchor,\n    handleContextMenu: handlePatternContextMenu,\n    handleContextMenuClose: handlePatternContextMenuClose,\n    handleContextMenuHide: handlePatternContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getPatternMenuElement = useLastCallback(() => patternMenuRef.current!);\n\n  const SortMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n   = useMemo(() => {\n     const sortType = filter.sortType;\n     return ({ onTrigger, isOpen: isMenuOpen }) => (\n       <div\n         className={styles.item}\n         onClick={onTrigger}\n       >\n         {sortType === 'byDate' && lang('ValueGiftSortByDate')}\n         {sortType === 'byNumber' && lang('ValueGiftSortByNumber')}\n         {sortType === 'byPrice' && lang('ValueGiftSortByPrice')}\n         <Icon\n           name=\"dropdown-arrows\"\n           className={styles.itemIcon}\n         />\n       </div>\n     );\n   }, [lang, filter]);\n\n  const ModelMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n   = useMemo(() => {\n     const attributesCount = filter?.modelAttributes?.length || 0;\n     return ({ onTrigger, isOpen: isMenuOpen }) => (\n       <div\n         className={styles.item}\n         onClick={onTrigger}\n       >\n         {attributesCount === 0 && lang('GiftAttributeModel')}\n         {attributesCount > 0\n           && lang('GiftAttributeModelPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n         <Icon\n           name=\"dropdown-arrows\"\n           className={styles.itemIcon}\n         />\n       </div>\n     );\n   }, [lang, filter]);\n  const BackdropMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n   = useMemo(() => {\n     const attributesCount = filter?.backdropAttributes?.length || 0;\n     return ({ onTrigger, isOpen: isMenuOpen }) => (\n       <div\n         className={styles.item}\n         onClick={onTrigger}\n       >\n         {attributesCount === 0 && lang('GiftAttributeBackdrop')}\n         {attributesCount > 0\n           && lang('GiftAttributeBackdropPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n         <Icon\n           name=\"dropdown-arrows\"\n           className={styles.itemIcon}\n         />\n       </div>\n     );\n   }, [lang, filter]);\n  const PatternMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n  = useMemo(() => {\n    const attributesCount = filter?.patternAttributes?.length || 0;\n    return ({ onTrigger, isOpen: isMenuOpen }) => (\n      <div\n        className={styles.item}\n        onClick={onTrigger}\n      >\n        {attributesCount === 0 && lang('GiftAttributeSymbol')}\n        {attributesCount > 0\n          && lang('GiftAttributeSymbolPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n        <Icon\n          name=\"dropdown-arrows\"\n          className={styles.itemIcon}\n        />\n      </div>\n    );\n  }, [lang, filter]);\n\n  const handleSortMenuItemClick = useLastCallback((type: ResaleGiftsSortType) => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      sortType: type,\n    } });\n  });\n\n  const handleSelectedAllModelsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n    } });\n  });\n  const handleSelectedAllPatternsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: [],\n    } });\n  });\n  const handleSelectedAllBackdropsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: [],\n    } });\n  });\n\n  const handleModelMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeModel) => {\n    if (!counters) return;\n    const attributes = filter.modelAttributes || [];\n    const modelAttribute\n      = counters.find((counter): counter is ApiStarGiftAttributeCounter<StarGiftAttributeIdModel> =>\n        counter.attribute.type === 'model' && counter.attribute.documentId === attribute.sticker.id,\n      )?.attribute;\n\n    if (!modelAttribute) return;\n\n    const isActive = attributes.some((item) => item.documentId === modelAttribute.documentId);\n    const updatedAttributes = isActive\n      ? attributes.filter((item) => item.documentId !== modelAttribute.documentId)\n      : [...attributes, modelAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: updatedAttributes,\n    } });\n  });\n\n  const handlePatternMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributePattern) => {\n    if (!counters) return;\n    const attributes = filter.patternAttributes || [];\n    const patternAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdPattern> =>\n        counter.attribute.type === 'pattern' && counter.attribute.documentId === attribute.sticker.id,\n    )?.attribute;\n\n    if (!patternAttribute) return;\n\n    const isActive = attributes.some((item) => item.documentId === patternAttribute.documentId);\n    const updatedAttributes = isActive\n      ? attributes.filter((item) => item.documentId !== patternAttribute.documentId)\n      : [...attributes, patternAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: updatedAttributes,\n    } });\n  });\n\n  const handleBackdropMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeBackdrop) => {\n    if (!counters) return;\n    const attributes = filter.backdropAttributes || [];\n    const backdropAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdBackdrop> =>\n        counter.attribute.type === 'backdrop' && counter.attribute.backdropId === attribute.backdropId,\n    )?.attribute;\n\n    if (!backdropAttribute) return;\n\n    const isActive = attributes.some((item) => item.backdropId === backdropAttribute.backdropId);\n    const updatedAttributes = isActive\n      ? attributes.filter((item) => item.backdropId !== backdropAttribute.backdropId)\n      : [...attributes, backdropAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: updatedAttributes,\n    } });\n  });\n\n  function renderSortMenuItems() {\n    return (\n      <>\n        <MenuItem icon=\"sort-by-price\" onClick={() => { handleSortMenuItemClick('byPrice'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByPrice')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byPrice' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n        <MenuItem icon=\"sort-by-date\" onClick={() => { handleSortMenuItemClick('byDate'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByDate')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byDate' ? 'check' : 'placeholder'}\n          />\n\n        </MenuItem>\n        <MenuItem icon=\"sort-by-number\"onClick={() => { handleSortMenuItemClick('byNumber'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByNumber')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byNumber' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n      </>\n    );\n  }\n\n  function renderSortMenu() {\n    return (\n      <Menu\n        isOpen={isSortContextMenuOpen}\n        anchor={sortContextMenuAnchor}\n        ref={sortMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getSortMenuElement}\n        autoClose\n        onClose={handleSortContextMenuClose}\n        onCloseAnimationEnd={handleSortContextMenuHide}\n        positionX=\"left\"\n      >\n        {renderSortMenuItems()}\n      </Menu>\n    );\n  }\n\n  const handleSearchModelInputReset = useCallback(() => {\n    setSearchModelQuery('');\n  }, []);\n  const handleSearchBackdropInputReset = useCallback(() => {\n    setSearchBackdropQuery('');\n  }, []);\n  const handleSearchPatternInputReset = useCallback(() => {\n    setSearchPatternQuery('');\n  }, []);\n  const handleSearchInputClick = useLastCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  });\n\n  const modelMenuItemsContainerRef = useRef<HTMLDivElement>();\n  const { observe } = useIntersectionObserver({\n    rootRef: modelMenuItemsContainerRef,\n    isDisabled: !modelContextMenuAnchor,\n  });\n\n  function renderModelMenuItems() {\n    const models = filteredAndSearchedAttributes.model;\n    const selectedAttributes = filter.modelAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n    return (\n      <div className={styles.menuContentContainer} ref={modelMenuItemsContainerRef}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchModelQuery}\n          onChange={setSearchModelQuery}\n          onReset={handleSearchModelInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllModelsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {models.map((model) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === model.sticker.id);\n          return (\n            <MenuItem\n              key={model.name}\n              onClick={() => {\n                handleModelMenuItemClick(model);\n              }}\n            >\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={model.sticker}\n                type=\"model\"\n                observeIntersectionForLoading={observe}\n                observeIntersectionForPlaying={observe}\n              />\n              <div className={styles.menuItemStickerText}>\n                {model.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderModelMenu() {\n    return (\n      <Menu\n        isOpen={isModelContextMenuOpen}\n        anchor={modelContextMenuAnchor}\n        ref={modelMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getModelMenuElement}\n        autoClose\n        onClose={handleModelContextMenuClose}\n        onCloseAnimationEnd={handleModelContextMenuHide}\n      >\n        {renderModelMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderBackdropMenuItems() {\n    const backdrops = filteredAndSearchedAttributes.backdrop;\n    const selectedAttributes = filter.backdropAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchBackdropQuery}\n          onChange={setSearchBackdropQuery}\n          onReset={handleSearchBackdropInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllBackdropsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {backdrops.map((backdrop) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.backdropId === backdrop.backdropId);\n\n          return (\n            <MenuItem\n              key={backdrop.name}\n              onClick={() => {\n                handleBackdropMenuItemClick(backdrop);\n              }}\n            >\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[backdrop.centerColor, backdrop.edgeColor]}\n                patternColor={backdrop.patternColor}\n              />\n              <div className={styles.backdropAttributeMenuItemText}>\n                {backdrop.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderBackdropMenu() {\n    return (\n      <Menu\n        isOpen={isBackdropContextMenuOpen}\n        anchor={backdropContextMenuAnchor}\n        ref={backdropMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getBackdropMenuElement}\n        autoClose\n        onClose={handleBackdropContextMenuClose}\n        onCloseAnimationEnd={handleBackdropContextMenuHide}\n        positionX=\"right\"\n      >\n        {renderBackdropMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderPatternMenuItems() {\n    const patterns = filteredAndSearchedAttributes.pattern;\n    const selectedAttributes = filter.patternAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchPatternQuery}\n          onChange={setSearchPatternQuery}\n          onReset={handleSearchPatternInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllPatternsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {patterns.map((pattern) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === pattern.sticker.id);\n\n          return (\n            <MenuItem\n              key={pattern.name}\n              onClick={() => {\n                handlePatternMenuItemClick(pattern);\n              }}\n            >\n\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={pattern.sticker}\n                type=\"pattern\"\n              />\n\n              <div className={styles.menuItemStickerText}>\n                {pattern.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPatternMenu() {\n    return (\n      <Menu\n        isOpen={isPatternContextMenuOpen}\n        anchor={patternContextMenuAnchor}\n        ref={patternMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getPatternMenuElement}\n        autoClose\n        onClose={handlePatternContextMenuClose}\n        onCloseAnimationEnd={handlePatternContextMenuHide}\n      >\n        {renderPatternMenuItems()}\n      </Menu>\n    );\n  }\n\n  return (\n    <div className={styles.root}>\n      {Boolean(sortContextMenuAnchor) && renderSortMenu()}\n      {Boolean(modelContextMenuAnchor) && renderModelMenu()}\n      {Boolean(backdropContextMenuAnchor) && renderBackdropMenu()}\n      {Boolean(patternContextMenuAnchor) && renderPatternMenu()}\n      <div className={styles.buttonsContainer}>\n        <SortMenuButton\n          onTrigger={handleSortContextMenu}\n          isOpen={isSortContextMenuOpen}\n        />\n        <ModelMenuButton\n          onTrigger={handleModelContextMenu}\n          isOpen={isModelContextMenuOpen}\n        />\n        <BackdropMenuButton\n          onTrigger={handleBackdropContextMenu}\n          isOpen={isBackdropContextMenuOpen}\n        />\n        <PatternMenuButton\n          onTrigger={handlePatternContextMenu}\n          isOpen={isPatternContextMenuOpen}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const { resaleGifts } = selectTabState(global);\n\n  const attributes = resaleGifts.attributes;\n  const counters = resaleGifts.counters;\n  const filter = resaleGifts.filter;\n\n  return {\n    attributes,\n    counters,\n    filter,\n  };\n})(GiftResaleFilters));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"KLFLR9ji\",\"thumb\":\"fCL5rY2D\"};","import React from '@teact';\nimport type { FC } from '../../../lib/teact/teact';\nimport { memo, useRef } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\n\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useDynamicColorListener from '../../../hooks/stickers/useDynamicColorListener';\nimport { type ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport StickerView from '../../common/StickerView';\n\nimport styles from './ResaleGiftMenuAttributeSticker.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  type: 'model' | 'pattern';\n  sticker: ApiSticker;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n};\n\ntype StateProps = {\n  theme: ThemeKey;\n};\n\nconst ATTRIBUTE_STICKER_SIZE = 1.5 * REM;\n\nconst ResaleGiftMenuAttributeSticker: FC<StateProps & OwnProps> = ({\n  className,\n  type,\n  sticker,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  theme,\n}) => {\n  const stickerRef = useRef<HTMLDivElement>();\n\n  const customColor = useDynamicColorListener(stickerRef, undefined, type !== 'pattern');\n\n  return (\n    <div\n      ref={stickerRef}\n      className={buildClassName(styles.root, className)}\n      style={`width: ${ATTRIBUTE_STICKER_SIZE}px; height: ${ATTRIBUTE_STICKER_SIZE}px`}\n    >\n      <StickerView\n        containerRef={stickerRef}\n        sticker={sticker}\n        size={ATTRIBUTE_STICKER_SIZE}\n        shouldPreloadPreview\n        observeIntersectionForLoading={observeIntersectionForLoading}\n        observeIntersectionForPlaying={observeIntersectionForPlaying}\n        thumbClassName={styles.thumb}\n        customColor={customColor}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    theme: selectTheme(global),\n  };\n})(ResaleGiftMenuAttributeSticker));\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"cUjwvN00\",\"item-selected\":\"medfcJpd\",\"itemSelected\":\"medfcJpd\",\"item\":\"dO7FKYY4\",\"selected-item\":\"B2lEJk1v\",\"selectedItem\":\"B2lEJk1v\",\"star\":\"Pb7AU805\"};","import React from '@teact';\nimport {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n  areLimitedStarGiftsDisallowed?: boolean;\n};\n\nconst StarGiftCategoryList = ({\n  idsByCategory,\n  onCategoryChanged,\n  areLimitedStarGiftsDisallowed,\n}: StateProps & OwnProps) => {\n  const ref = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const starCategories: number[] | undefined = useMemo(() => idsByCategory && Object.keys(idsByCategory)\n    .filter((category) => category !== 'all' && category !== 'limited')\n    .map(Number)\n    .sort((a, b) => a - b),\n  [idsByCategory]);\n\n  const hasResale = idsByCategory && idsByCategory['resale'].length > 0;\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(\n      category,\n    );\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'stock') return lang('StockGiftsCategory');\n    if (category === 'limited') return lang('LimitedGiftsCategory');\n    if (category === 'resale') return lang('GiftCategoryResale');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {Number.isInteger(category) && (\n          <StarIcon\n            className={styles.star}\n            type=\"gold\"\n            size=\"middle\"\n          />\n        )}\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {!areLimitedStarGiftsDisallowed && renderCategoryItem('limited')}\n      {!areLimitedStarGiftsDisallowed && hasResale && renderCategoryItem('resale')}\n      {renderCategoryItem('stock')}\n      {starCategories?.map(renderCategoryItem)}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"irv1C8bo\",\"subtitleBadge\":\"V7kDVPLm\",\"radialPattern\":\"UvhsGZLf\",\"amount\":\"zTVWZg63\",\"sticker\":\"a1ASgPwu\",\"transition\":\"Tu6_OHoq\",\"transitionSlide\":\"iUTKLzTN\",\"title\":\"ECTvfOda\",\"subtitle\":\"S6JwvHWD\"};","import React from '@teact';\nimport type { TeactNode } from '@teact';\nimport { memo, useMemo } from '@teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n  ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport {\n  formatStarsTransactionAmount,\n} from '../../../global/helpers/payments';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\nimport useFlag from '../../../hooks/useFlag.ts';\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: string;\n  subtitle?: TeactNode;\n  subtitlePeer?: ApiPeer;\n  className?: string;\n  resellPrice?: ApiTypeCurrencyAmount;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  subtitle,\n  subtitlePeer,\n  className,\n  resellPrice,\n}: OwnProps) => {\n  const {\n    openChat,\n  } = getActions();\n\n  const lang = useLang();\n  const [isHover, markHover, unmarkHover] = useFlag();\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n    const patternColor = backdropAttribute.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternAttribute.sticker}\n      />\n    );\n  }, [backdropAttribute, patternAttribute]);\n\n  return (\n    <div className={buildClassName(styles.root, className)}>\n      <Transition\n        className={styles.transition}\n        slideClassName={buildClassName('interactive-gift', styles.transitionSlide)}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n          noLoop={!isHover}\n          onMouseEnter={!IS_TOUCH_ENV ? markHover : undefined}\n          onMouseLeave={!IS_TOUCH_ENV ? unmarkHover : undefined}\n        />\n      </Transition>\n      {title && <h1 className={styles.title}>{title}</h1>}\n      {Boolean(subtitle) && (\n        <div\n          className={buildClassName(styles.subtitle, subtitlePeer && styles.subtitleBadge)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n          onClick={() => {\n            if (subtitlePeer) {\n              openChat({ id: subtitlePeer.id });\n            }\n          }}\n        >\n          {subtitle}\n        </div>\n      )}\n      {resellPrice && (\n        <p className={styles.amount}>\n          <span>\n            {formatStarsTransactionAmount(lang, resellPrice)}\n          </span>\n          {resellPrice.currency === 'XTR' && <StarIcon type=\"gold\" size=\"middle\" />}\n          {resellPrice.currency === 'TON' && <Icon name=\"toncoin\" />}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"nnublcCk\",\"checkBox\":\"fjE0wGvw\",\"checkBoxDescription\":\"tepUTe4z\",\"upgradeIcon\":\"lgyInH5K\",\"header\":\"p7FTs7_p\",\"title\":\"pIbzzTir\",\"description\":\"CCPfr26t\",\"soldOut\":\"kjWcRp4W\",\"headerSplitButton\":\"XOMI_4PO\",\"headerButton\":\"WA0INleU\",\"giftResalePriceContainer\":\"BN8gf5y6\",\"starAmountIcon\":\"_5guecUe\",\"giftResalePriceStar\":\"H_q8o2vY\",\"left\":\"aOhTHZlf\",\"right\":\"rJOB1u5Q\",\"footer\":\"bho0GTYt\",\"footerDescription\":\"VUylTszM\",\"unknown\":\"zDauXmpS\",\"giftValue\":\"w_E4LkUj\",\"uniqueAttribute\":\"OJQnkf17\",\"uniqueGift\":\"I6o_pGAm\",\"modalHeader\":\"ie9tImaj\",\"modalCloseButton\":\"p38RBGdC\",\"ownerAddress\":\"DavMRg4Q\",\"copyIcon\":\"SLX5tX8C\"};","import React from '@teact';\nimport type { FC, TeactNode } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiEmojiStatusType,\n  ApiPeer,\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { getHasAdminRight } from '../../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../../global/helpers/peers';\nimport { getMainUsername } from '../../../../global/helpers/users';\nimport { selectPeer, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport {\n  formatStarsAsIcon, formatStarsAsText, formatTonAsIcon, formatTonAsText,\n} from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftMenuItems from '../../../common/gift/GiftMenuItems';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport Link from '../../../ui/Link';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  releasedByPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n  tonExplorerUrl?: string;\n  currentUser?: ApiUser;\n  recipientPeer?: ApiPeer;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  releasedByPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n  tonExplorerUrl,\n  currentUser,\n  recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    buyStarGift,\n    closeGiftModal,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState<boolean>(false);\n  const [shouldPayInTon, setShouldPayInTon] = useState<boolean>(false);\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n  const hasConvertOption = canConvertDifference > 0 && Boolean(savedGift?.starsToConvert);\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n\n  const giftSubtitle = useMemo(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return undefined;\n\n    if (releasedByPeer) {\n      const releasedByUsername = `@${getMainUsername(releasedByPeer)}`;\n      const ownerTitle = releasedByUsername || getPeerTitle(lang, releasedByPeer);\n      const fallbackText = isApiPeerUser(releasedByPeer)\n        ? lang('ActionFallbackUser')\n        : lang('ActionFallbackChannel');\n\n      return lang('GiftInfoCollectibleBy', {\n        number: gift.number, owner: ownerTitle || fallbackText }, {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    return lang('GiftInfoCollectible', { number: gift.number });\n  }, [gift, releasedByPeer, lang]);\n\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n  const canManage = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights : renderingTargetPeer?.id === currentUserId\n  );\n\n  function getResalePrice(shouldPayInTon?: boolean) {\n    if (!isGiftUnique) return undefined;\n    const amounts = gift.resellPrice;\n    if (!amounts) return undefined;\n\n    if (gift?.resaleTonOnly || shouldPayInTon) {\n      return amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n    }\n\n    return amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n  }\n\n  const resellPrice = getResalePrice();\n  const confirmPrice = getResalePrice(shouldPayInTon);\n  const canBuyGift = gift?.type === 'starGiftUnique' && gift.ownerId !== currentUserId && Boolean(resellPrice);\n\n  const giftOwnerTitle = (() => {\n    if (!isGiftUnique) return undefined;\n    const { ownerName, ownerId } = gift;\n    const global = getGlobal(); // Peer titles do not need to be reactive\n    const owner = ownerId ? selectPeer(global, ownerId) : undefined;\n    return owner ? getPeerTitle(lang, owner) : ownerName;\n  })();\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    const giftChat = isSender ? renderingTargetPeer : renderingFromPeer;\n    if (!savedGift?.upgradeMsgId || !giftChat) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: giftChat.id, messageId: upgradeMsgId });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift });\n  });\n\n  const handleBuyGift = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !getResalePrice()) return;\n    setIsConfirmModalOpen(true);\n  });\n\n  const closeConfirmModal = useLastCallback(() => {\n    setIsConfirmModalOpen(false);\n  });\n\n  const handleConfirmBuyGift = useLastCallback(() => {\n    const peer = recipientPeer || currentUser;\n    const price = getResalePrice(shouldPayInTon);\n    if (!peer || !price || gift?.type !== 'starGiftUnique') return;\n    closeConfirmModal();\n    closeGiftModal();\n    buyStarGift({ peerId: peer.id, slug: gift.slug, price });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const SettingsMenuButton: FC<{ onTrigger: () => void; isMenuOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger }) => (\n      <div\n        className={buildClassName(\n          styles.headerButton,\n          styles.left,\n        )}\n        tabIndex={0}\n        role=\"button\"\n        aria-haspopup=\"menu\"\n        aria-label={lang('AriaMoreButton')}\n        onClick={onTrigger}\n      >\n        <Icon\n          name=\"more\"\n          className={styles.icon}\n        />\n      </div>\n    );\n  }, [lang]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canBuyGift) {\n      return (\n        <Button noForcedUpperCase size=\"smaller\" onClick={handleBuyGift}>\n          {lang('ButtonBuyGift', {\n            stars: resellPrice?.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, resellPrice.amount, { shouldConvertFromNanos: true })\n              : formatStarsAsIcon(lang, resellPrice?.amount, { asFont: true }),\n          }, { withNodes: true })}\n        </Button>\n      );\n    }\n\n    if (canFocusUpgrade) {\n      return (\n        <Button size=\"smaller\" onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button size=\"smaller\" isShiny onClick={handleOpenUpgradeModal}>\n          {lang('GiftInfoUpgradeForFree')}\n          <Icon name=\"arrow-down-circle\" className={styles.upgradeIcon} />\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift.canUpgrade && !savedGift.upgradeMsgId) {\n      return (\n        <Button size=\"smaller\" isShiny onClick={handleOpenUpgradeModal}>\n          {lang('GiftInfoUpgrade')}\n          <Icon name=\"arrow-down-circle\" className={styles.upgradeIcon} />\n        </Button>\n      );\n    }\n\n    return (\n      <Button size=\"smaller\" onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const saleDateInfo = useMemo(() => {\n    if (!gift) return undefined;\n    let text = '';\n    if (gift.type === 'starGift') {\n      if (gift.firstSaleDate) {\n        text += `${lang('GiftInfoFirstSale')} ${formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true)}`;\n      }\n      if (gift.lastSaleDate) {\n        text += '\\n';\n        text += `${lang('GiftInfoLastSale')} ${formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true)}`;\n      }\n    }\n\n    return text;\n  }, [gift, lang]);\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted, upgradeMsgId,\n    } = savedGift || {};\n    const canConvert = hasConvertOption && Boolean(starsToConvert);\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (canManage && savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n        return lang('GiftInfoDescriptionUpgrade');\n      }\n      if (savedGift.canUpgrade && canManage) {\n        return canManage\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canManage && !isSender) return undefined;\n      if (isConverted && canConvert) {\n        return canManage\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: starsToConvert,\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescriptionUpgrade', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n        }\n\n        return lang('GiftInfoDescriptionUpgradeRegular');\n      }\n\n      if (canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescription', {\n            amount: starsToConvert,\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n            pluralValue: starsToConvert,\n          });\n        }\n\n        return lang('GiftInfoDescriptionRegular');\n      }\n\n      if (canConvert) {\n        return lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        });\n      }\n\n      return lang('GiftInfoPeerDescriptionOutRegular', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n    })();\n\n    function getTitle() {\n      if (isGiftUnique) return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canManage ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const uniqueGiftContextMenu = (\n      <DropdownMenu\n        className=\"with-menu-transitions\"\n        trigger={SettingsMenuButton}\n        positionX=\"right\"\n      >\n        <GiftMenuItems\n          peerId={renderingModal!.peerId!}\n          gift={typeGift}\n          canManage={canManage}\n          collectibleEmojiStatuses={collectibleEmojiStatuses}\n          currentUserEmojiStatus={currentUserEmojiStatus}\n        />\n      </DropdownMenu>\n    );\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n        {Boolean(resellPrice?.amount) && (\n          <div className={styles.giftResalePriceContainer}>\n            {resellPrice.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, resellPrice.amount, {\n                className: styles.giftResalePriceStar,\n                shouldConvertFromNanos: true,\n              })\n              : formatStarsAsIcon(lang, resellPrice.amount, {\n                asFont: true,\n                className: styles.giftResalePriceStar,\n              })}\n          </div>\n        )}\n        <div className={styles.headerSplitButton}>\n          {isOpen && uniqueGiftContextMenu}\n          <div\n            className={buildClassName(\n              styles.headerButton,\n              styles.right,\n            )}\n            tabIndex={0}\n            role=\"button\"\n            aria-haspopup=\"menu\"\n            aria-label={lang('Close')}\n            onClick={handleClose}\n          >\n            <Icon\n              name=\"close\"\n              className={buildClassName(\n                styles.icon,\n                styles.moreIcon,\n              )}\n            />\n          </div>\n        </div>\n      </div>\n    );\n\n    const uniqueGiftHeader = isGiftUnique && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={giftSubtitle}\n          subtitlePeer={releasedByPeer}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {Boolean(description) && (\n          <p className={buildClassName(styles.description, !savedGift && gift?.type === 'starGift' && styles.soldOut)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      const hasFrom = fromId || isNameHidden;\n\n      if (hasFrom) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          !fromId ? (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ) : { chatId: fromId },\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          <span title={saleDateInfo}>{formatDateTimeToString(savedGift.date * 1000, lang.code, true)}</span>,\n        ]);\n      }\n\n      if (gift.firstSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canManage && hasConvertOption && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (isGiftUnique) {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const ownerPeer = ownerId ? selectPeer(getGlobal(), ownerId) : undefined;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else if (ownerPeer || ownerName) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId, withEmojiStatus: true } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            {model.name}\n            <BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            {backdrop.name}\n            <BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            {pattern.name}\n            <BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (originalDetails) {\n        const {\n          date, recipientId, message, senderId,\n        } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n        const recipientLink = (\n          <Link onClick={() => openChat(recipientId)} isPrimary>\n            {getPeerTitle(lang, recipient)}\n          </Link>\n        );\n\n        let text: TeactNode | undefined;\n        if (!sender || senderId === recipientId) {\n          text = message ? lang('GiftInfoPeerOriginalInfoText', {\n            peer: recipientLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfo', {\n            peer: recipientLink,\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          });\n        } else {\n          const senderLink = (\n            <Link onClick={() => openChat(sender.id)} isPrimary>\n              {getPeerTitle(lang, sender)}\n            </Link>\n          );\n          text = message ? lang('GiftInfoPeerOriginalInfoTextSender', {\n            peer: recipientLink,\n            sender: senderLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfoSender', {\n            peer: recipientLink,\n            date: formattedDate,\n            sender: senderLink,\n          }, {\n            withNodes: true,\n          });\n        }\n\n        tableData.push([\n          undefined,\n          <span>{text}</span>,\n        ]);\n      }\n    }\n\n    const tonLink = tonExplorerUrl && isGiftUnique && gift.giftAddress && (\n      `${tonExplorerUrl}${gift.giftAddress}`\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {(canManage || tonLink || canBuyGift) && (\n          <div className={styles.footerDescription}>\n            {tonLink && (\n              <div>\n                {lang('GiftInfoTonText', {\n                  link: <SafeLink url={tonLink} shouldSkipModal text={lang('GiftInfoTonLinkText')} />,\n                }, { withNodes: true })}\n              </div>\n            )}\n            {canManage && (\n              <div>\n                {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                  link: (\n                    <Link isPrimary onClick={handleTriggerVisibility}>\n                      {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`)}\n                    </Link>\n                  ),\n                }, {\n                  withNodes: true,\n                })}\n              </div>\n            )}\n            {!canBuyGift && isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n            {canBuyGift && giftOwnerTitle && (\n              <div>\n                {lang('GiftInfoBuyGift', {\n                  user: giftOwnerTitle,\n                }, { withNodes: true })}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isGiftUnique ? uniqueGiftModalHeader : undefined,\n      header: isGiftUnique ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang,\n    canManage, hasConvertOption, isSender, oldLang, tonExplorerUrl,\n    gift, giftAttributes, renderFooterButton, isTargetChat,\n    SettingsMenuButton, isGiftUnique, renderingModal,\n    collectibleEmojiStatuses, currentUserEmojiStatus, saleDateInfo,\n    canBuyGift, giftOwnerTitle, isOpen, resellPrice, giftSubtitle,\n    releasedByPeer,\n  ]);\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={isGiftUnique}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        onClose={handleClose}\n        withBalanceBar={Boolean(canBuyGift)}\n        currencyInBalanceBar={confirmPrice?.currency}\n        isLowStackPriority\n      />\n      {uniqueGift && currentUser && Boolean(confirmPrice) && (\n        <ConfirmDialog\n          isOpen={isConfirmModalOpen}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={lang('ButtonBuyGift', {\n            stars: confirmPrice?.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, confirmPrice.amount, { shouldConvertFromNanos: true })\n              : formatStarsAsIcon(lang, confirmPrice.amount, { asFont: true }),\n          }, { withNodes: true })}\n          confirmHandler={handleConfirmBuyGift}\n        >\n\n          <GiftTransferPreview\n            peer={recipientPeer || currentUser}\n            gift={uniqueGift}\n          />\n          {!recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyForPeerConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                  peer: getPeerTitle(lang, recipientPeer),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {!uniqueGift.resaleTonOnly && (\n            <>\n              <Checkbox\n                className={styles.checkBox}\n                label={lang('LabelPayInTON')}\n                checked={shouldPayInTon}\n                onCheck={setShouldPayInTon}\n              />\n\n              <div className={styles.checkBoxDescription}>\n                {lang('DescriptionPayInTON')}\n              </div>\n            </>\n          )}\n        </ConfirmDialog>\n      )}\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {hasConvertOption && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n    const currentUserId = global.currentUserId;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n    const currentUser = selectUser(global, currentUserId!);\n    const recipientPeer = modal?.recipientId && currentUserId !== modal.recipientId\n      ? selectPeer(global, modal.recipientId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    const gift = isSavedGift ? typeGift.gift : typeGift;\n    const releasedByPeerId = gift?.type === 'starGiftUnique' && gift.releasedByPeerId;\n    const releasedByPeer = releasedByPeerId ? selectPeer(global, releasedByPeerId) : undefined;\n\n    return {\n      fromPeer,\n      targetPeer,\n      releasedByPeer,\n      currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig?.starGiftMaxConvertPeriod,\n      tonExplorerUrl: global.appConfig?.tonExplorerUrl,\n      hasAdminRights,\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n      currentUser,\n      recipientPeer,\n    };\n  },\n)(GiftInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"W3JMs1YE\",\"picker\":\"wOipz1Y_\"};","import React from '@teact';\nimport {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { filterPeersByQuery } from '../../../../global/helpers/peers';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker = ({\n  modal,\n  currentUserId,\n  userIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const global = getGlobal();\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredPeerIds = idsWithSelf ? filterPeersByQuery({ ids: idsWithSelf, query: searchQuery }) : [];\n\n    return sortChatIds(unique(filteredPeerIds).filter((peerId) => {\n      return selectCanGift(global, peerId);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n  };\n})(GiftRecipientPicker));\n","// extracted by mini-css-extract-plugin\nexport default {\"checkBoxDescription\":\"pWjQiY4m\",\"inputPriceDescription\":\"SGFmA4kL\",\"checkBox\":\"yt_nODdj\",\"descriptionPrice\":\"r9R0VR_w\",\"inputPrice\":\"ElDo1Bru\"};","import React from '@teact';\nimport {\n  memo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { convertTonFromNanos, convertTonToNanos } from '../../../../util/formatCurrency';\nimport { convertTonToUsd, formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon, formatStarsAsText, formatTonAsIcon,\n  formatTonAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftResalePriceComposerModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftResalePriceComposerModal'];\n};\n\nexport type StateProps = {\n  starsStargiftResaleCommissionPermille?: number;\n  starsStargiftResaleAmountMin: number;\n  starsStargiftResaleAmountMax?: number;\n  starsUsdWithdrawRate?: number;\n  tonStargiftResaleCommissionPermille?: number;\n  tonStargiftResaleAmountMin: number;\n  tonStargiftResaleAmountMax?: number;\n  tonUsdRate?: number;\n};\n\nconst GiftResalePriceComposerModal = ({\n  modal, starsStargiftResaleCommissionPermille,\n  starsStargiftResaleAmountMin, starsStargiftResaleAmountMax, starsUsdWithdrawRate,\n  tonStargiftResaleCommissionPermille, tonStargiftResaleAmountMin, tonStargiftResaleAmountMax, tonUsdRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftResalePriceComposerModal,\n    closeGiftInfoModal,\n    updateStarGiftPrice,\n    showNotification,\n  } = getActions();\n  const isOpen = Boolean(modal);\n  const [price, setPrice] = useState<number | undefined>(undefined);\n  const [isPriceInTon, setIsPriceInTon] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const hasPrice = Boolean(price);\n\n  const lang = useLang();\n\n  const handleChangePrice = useLastCallback((e) => {\n    const value = e.target.value;\n    const number = parseFloat(value);\n    const maxAmount = isPriceInTon ? tonStargiftResaleAmountMax : starsStargiftResaleAmountMax;\n    const result = value === '' || Number.isNaN(number) ? undefined\n      : maxAmount ? Math.min(number, maxAmount) : number;\n    setPrice(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeGiftResalePriceComposerModal();\n  });\n\n  const handleSellGift = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift || !price) return;\n    closeGiftResalePriceComposerModal();\n    closeGiftInfoModal();\n    updateStarGiftPrice(\n      {\n        gift: savedGift.inputGift,\n        price: {\n          currency: isPriceInTon ? 'TON' : 'XTR',\n          amount: isPriceInTon ? convertTonToNanos(price) : price,\n          nanos: 0,\n        },\n      });\n    showNotification({\n      icon: 'sell-outline',\n      message: {\n        key: 'NotificationGiftIsSale',\n        variables: {\n          gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }),\n        },\n      },\n    });\n  });\n  const commission = isPriceInTon ? tonStargiftResaleCommissionPermille : starsStargiftResaleCommissionPermille;\n  const minAmount = isPriceInTon ? tonStargiftResaleAmountMin : starsStargiftResaleAmountMin;\n  const isPriceCorrect = hasPrice && price >= minAmount;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={isPriceInTon ? lang('PriceInTON') : lang('PriceInStars')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      <div className={styles.inputPrice}>\n        <InputText\n          label={isPriceInTon ? lang('EnterPriceInTon') : lang('EnterPriceInStars')}\n          onChange={handleChangePrice}\n          value={price?.toString()}\n          inputMode=\"numeric\"\n          tabIndex={0}\n          teactExperimentControlled={!isPriceInTon}\n        />\n      </div>\n\n      <div className={styles.inputPriceDescription}>\n        <span>\n          {!isPriceCorrect && Boolean(commission) && lang('DescriptionComposerGiftMinimumPrice', {\n            stars: isPriceInTon ? formatTonAsText(lang, minAmount) : formatStarsAsText(lang, minAmount),\n          }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n          {isPriceCorrect && (() => {\n            const priceWithCommission = commission ? Number((price * commission).toFixed()) : price;\n            return lang('DescriptionComposerGiftResalePrice',\n              {\n                stars: isPriceInTon\n                  ? formatTonAsText(lang, priceWithCommission)\n                  : formatStarsAsText(lang, priceWithCommission),\n              },\n              {\n                withMarkdown: true,\n                withNodes: true,\n              });\n          })()}\n        </span>\n\n        {isPriceCorrect && Boolean(isPriceInTon ? tonUsdRate : starsUsdWithdrawRate) && (\n          <span className={styles.descriptionPrice}>\n            {` ${formatCurrencyAsString(\n              isPriceInTon ? convertTonToUsd(price, tonUsdRate!) : price * starsUsdWithdrawRate!,\n              'USD',\n              lang.code,\n            )}`}\n          </span>\n        )}\n      </div>\n\n      <Checkbox\n        className={styles.checkBox}\n        label={lang('OnlyAcceptTON')}\n        checked={isPriceInTon}\n        onCheck={setIsPriceInTon}\n      />\n\n      <div className={styles.checkBoxDescription}>\n        {lang('OnlyAcceptTONDescription')}\n      </div>\n\n      <Button noForcedUpperCase disabled={!isPriceCorrect} size=\"smaller\" onClick={handleSellGift}>\n        {isPriceCorrect && lang('ButtonSellGift', {\n          stars: isPriceInTon ? formatTonAsIcon(lang, price)\n            : formatStarsAsIcon(lang, price, { asFont: true }),\n        }, { withNodes: true })}\n        {!isPriceCorrect && lang('Sell')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const configPermille = global.appConfig?.starsStargiftResaleCommissionPermille;\n    const starsStargiftResaleCommissionPermille = configPermille ? (configPermille / 1000) : undefined;\n    const starsStargiftResaleAmountMin = global.appConfig?.starsStargiftResaleAmountMin || 0;\n    const starsStargiftResaleAmountMax = global.appConfig?.starsStargiftResaleAmountMax;\n\n    const starsUsdWithdrawRateX1000 = global.appConfig?.starsUsdWithdrawRateX1000;\n    const starsUsdWithdrawRate = starsUsdWithdrawRateX1000 ? starsUsdWithdrawRateX1000 / 1000 : 1;\n\n    const tonConfigPermille = global.appConfig?.tonStargiftResaleCommissionPermille;\n    const tonStargiftResaleCommissionPermille = tonConfigPermille ? (tonConfigPermille / 1000) : 0;\n    const tonStargiftResaleAmountMin = convertTonFromNanos(global.appConfig?.tonStargiftResaleAmountMin || 0);\n    const maxTonFromConfig = global.appConfig?.tonStargiftResaleAmountMax;\n    const tonStargiftResaleAmountMax = maxTonFromConfig && convertTonFromNanos(maxTonFromConfig);\n\n    const tonUsdRate = global.appConfig?.tonUsdRate;\n\n    return {\n      starsStargiftResaleCommissionPermille,\n      starsStargiftResaleAmountMin,\n      starsStargiftResaleAmountMax,\n      starsUsdWithdrawRate,\n      tonStargiftResaleCommissionPermille,\n      tonStargiftResaleAmountMin,\n      tonStargiftResaleAmountMax,\n      tonUsdRate,\n    };\n  },\n)(GiftResalePriceComposerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"qL0cHbwS\",\"profileBlock\":\"t18QCmAb\",\"titleContainer\":\"q8w7tnmR\",\"radialPattern\":\"_1RfhkfB\",\"lockIcon\":\"jiPObOWv\",\"avatar\":\"JK2zOWA7\",\"userTitle\":\"lxxbgNCl\",\"status\":\"MLMdxkUg\",\"giftTitle\":\"wxg_5ou_\",\"infoDescription\":\"KSCLIMZm\",\"footer\":\"VDrvalBo\"};","import React from '@teact';\nimport { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectIsCurrentUserPremium, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useCustomEmoji from '../../../common/hooks/useCustomEmoji';\n\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport Icon from '../../../common/icons/Icon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftStatusInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftStatusInfoModal'];\n};\n\ntype StateProps = {\n  currentUser: ApiUser;\n  isCurrentUserPremium?: boolean;\n};\n\nconst GiftStatusInfoModal = ({\n  modal,\n  currentUser,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftStatusInfoModal,\n    setEmojiStatus,\n  } = getActions();\n  const lang = useLang();\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const { emojiStatus } = renderingModal || {};\n\n  const subtitleColor = emojiStatus?.textColor;\n\n  const patternIcon = useCustomEmoji(emojiStatus?.patternDocumentId);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftStatusInfoModal();\n  });\n\n  const onWearClick = useLastCallback(() => {\n    if (emojiStatus) {\n      setEmojiStatus({ emojiStatus });\n    }\n    closeGiftStatusInfoModal();\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    if (!emojiStatus || !isOpen) return undefined;\n\n    const backdropColors = [emojiStatus.centerColor, emojiStatus.edgeColor];\n    const patternColor = emojiStatus.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternIcon.customEmoji}\n      />\n    );\n  }, [emojiStatus, isOpen, patternIcon]);\n\n  const mockPeerWithStatus = useMemo(() => {\n    return {\n      ...currentUser,\n      emojiStatus,\n    } satisfies ApiUser;\n  }, [currentUser, emojiStatus]);\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div\n          className={buildClassName(styles.profileBlock)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n        >\n\n          {radialPatternBackdrop}\n          <Avatar peer={mockPeerWithStatus} size=\"jumbo\" className={styles.avatar} />\n          <FullNameTitle\n            peer={mockPeerWithStatus}\n            className={styles.userTitle}\n            withEmojiStatus\n            noFake\n            noVerified\n            statusSparklesColor={subtitleColor}\n          />\n          <p className={styles.status} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n            {lang('Online')}\n          </p>\n        </div>\n        <div className={styles.titleContainer}>\n          <div className={styles.giftTitle}>\n            {\n              lang('UniqueStatusWearTitle', {\n                gift: mockPeerWithStatus?.emojiStatus?.title,\n              })\n            }\n          </div>\n          <div className={styles.infoDescription}>\n            {\n              lang('UniqueStatusBenefitsDescription')\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }, [subtitleColor, radialPatternBackdrop, mockPeerWithStatus, lang]);\n\n  const listItemData = [\n    ['radial-badge', lang('UniqueStatusBadgeBenefitTitle'), lang('UniqueStatusBadgeDescription')],\n    ['unique-profile', lang('UniqueStatusProfileDesignBenefitTitle'), lang('UniqueStatusProfileDesignDescription')],\n    ['proof-of-ownership', lang('UniqueStatusProofOfOwnershipBenefitTitle'),\n      lang('UniqueStatusProofOfOwnershipDescription')],\n  ] satisfies TableAboutData;\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          size=\"smaller\"\n          onClick={onWearClick}\n        >\n          {lang('UniqueStatusWearButton')}\n          {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n        </Button>\n      </div>\n    );\n  }, [lang, isCurrentUserPremium, isOpen]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const currentUser = selectUser(global, global.currentUserId!)!;\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      currentUser,\n      isCurrentUserPremium,\n    };\n  },\n)(GiftStatusInfoModal));\n","import React from '@teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport type { UniqueCustomPeer } from '../../../../types';\n\nimport { ALL_FOLDER_ID } from '../../../../config';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectCanGift, selectPeer } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePeerSearch from '../../../../hooks/usePeerSearch';\n\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferModal'];\n};\n\ntype StateProps = {\n  contactIds?: string[];\n  currentUserId?: string;\n};\n\ntype Categories = 'withdraw';\n\nconst GiftTransferModal = ({\n  modal, contactIds, currentUserId,\n}: OwnProps & StateProps) => {\n  const { closeGiftTransferModal, openGiftWithdrawModal, transferGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const lang = useLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const uniqueGift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = uniqueGift && getGiftAttributes(uniqueGift);\n\n  const [selectedId, setSelectedId] = useState<string | undefined>();\n\n  const renderingSelectedPeerId = useCurrentOrPrev(selectedId);\n  const renderingSelectedPeer = useMemo(() => {\n    const global = getGlobal();\n    return renderingSelectedPeerId ? selectPeer(global, renderingSelectedPeerId) : undefined;\n  }, [renderingSelectedPeerId]);\n\n  const orderedChatIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n\n  const sortedLocalIds = useMemo(() => {\n    return unique([\n      ...(contactIds || []),\n      ...(orderedChatIds || []),\n    ]);\n  }, [contactIds, orderedChatIds]);\n\n  const { result: foundIds, currentResultsQuery } = usePeerSearch({\n    query: searchQuery,\n    defaultValue: sortedLocalIds,\n  });\n\n  const isLoading = currentResultsQuery !== searchQuery;\n\n  const categories = useMemo(() => {\n    if (currentResultsQuery) return MEMO_EMPTY_ARRAY;\n\n    return [{\n      type: 'withdraw',\n      isCustomPeer: true,\n      avatarIcon: 'toncoin',\n      peerColorId: 5,\n      title: lang('GiftTransferTON'),\n    }] satisfies UniqueCustomPeer<Categories>[];\n  }, [lang, currentResultsQuery]);\n\n  const handleCategoryChange = useLastCallback((category: Categories) => {\n    if (category !== 'withdraw') return;\n\n    openGiftWithdrawModal({\n      gift: renderingModal!.gift,\n    });\n    closeGiftTransferModal();\n  });\n\n  const displayIds = useMemo(() => {\n    if (isLoading) return MEMO_EMPTY_ARRAY;\n    const global = getGlobal();\n\n    return sortChatIds((foundIds || []).filter((peerId) => (\n      peerId !== currentUserId && selectCanGift(global, peerId)\n    )),\n    false);\n  }, [isLoading, foundIds, currentUserId]);\n\n  const closeConfirmModal = useLastCallback(() => {\n    setSelectedId(undefined);\n  });\n\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedId(undefined);\n    }\n  }, [isOpen]);\n\n  const handleTransfer = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift) return;\n    transferGift({\n      gift: renderingModal.gift.inputGift,\n      recipientId: renderingSelectedPeerId!,\n      transferStars: renderingModal.gift.transferStars,\n    });\n\n    closeConfirmModal();\n    closeGiftTransferModal();\n  });\n\n  return (\n    <PickerModal\n      isOpen={isOpen}\n      onClose={closeGiftTransferModal}\n      title={lang('GiftTransferTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      ignoreFreeze\n    >\n      <PeerPicker<Categories>\n        itemIds={displayIds}\n        categories={categories}\n        onSelectedCategoryChange={handleCategoryChange}\n        withDefaultPadding\n        withPeerUsernames\n        isSearchable\n        noScrollRestore\n        isLoading={isLoading}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        onFilterChange={setSearchQuery}\n        onSelectedIdChange={setSelectedId}\n      />\n      {giftAttributes && (\n        <ConfirmDialog\n          isOpen={Boolean(selectedId)}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={renderingModal?.gift.transferStars\n            ? lang(\n              'GiftTransferConfirmButton',\n              { amount: formatStarsAsIcon(lang, renderingModal.gift.transferStars, { asFont: true }) },\n              { withNodes: true },\n            ) : lang('GiftTransferConfirmButtonFree')}\n          confirmHandler={handleTransfer}\n        >\n          {renderingSelectedPeer && (\n            <GiftTransferPreview\n              peer={renderingSelectedPeer}\n              gift={uniqueGift}\n            />\n          )}\n          <p>\n            {renderingModal?.gift.transferStars\n              ? lang('GiftTransferConfirmDescription', {\n                gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                amount: formatStarsAsText(lang, renderingModal.gift.transferStars),\n                peer: getPeerTitle(lang, renderingSelectedPeer!),\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n              })\n              : lang('GiftTransferConfirmDescriptionFree', {\n                gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                peer: getPeerTitle(lang, renderingSelectedPeer!),\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n              })}\n          </p>\n        </ConfirmDialog>\n      )}\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { contactList, currentUserId } = global;\n\n    return {\n      contactIds: contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(GiftTransferModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"EWaVCxY4\",\"footerButton\":\"_Dt6RSQV\"};","import React from '@teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  ApiStarGiftRegular,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { ApiMediaFormat } from '../../../../api/types';\n\nimport { getStickerMediaHash } from '../../../../global/helpers';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { fetch } from '../../../../util/mediaLoader';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\ntype Attributes = {\n  model: ApiStarGiftAttributeModel;\n  pattern: ApiStarGiftAttributePattern;\n  backdrop: ApiStarGiftAttributeBackdrop;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const { closeGiftUpgradeModal, upgradeGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const [previewAttributes, setPreviewAttributes] = useState<Attributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? (gift.gift as ApiStarGiftRegular).upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  // Preload stickers and patterns\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    const patternStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'pattern')\n      .map((attr) => attr.sticker);\n    const modelStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'model')\n      .map((attr) => attr.sticker);\n\n    const mediaHashes = [...patternStickers, ...modelStickers].map((sticker) => getStickerMediaHash(sticker, 'full'));\n    mediaHashes.forEach((hash) => {\n      fetch(hash, ApiMediaFormat.BlobUrl);\n    });\n  }, [renderingModal?.sampleAttributes]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes || !isOpen) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const listItemData = [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ] satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} size=\"smaller\" onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            <Checkbox\n              label={lang('GiftUpgradeKeepDetails')}\n              onCheck={setShouldKeepOriginalDetails}\n              checked={shouldKeepOriginalDetails}\n            />\n            <Button className={styles.footerButton} size=\"smaller\" isShiny onClick={handleUpgrade}>\n              {gift.alreadyPaidUpgradeStars\n                ? lang('GeneralConfirm')\n                : lang('GiftUpgradeButton', {\n                  amount: formatStarsAsIcon(lang, (gift.gift as ApiStarGiftRegular).upgradeStars!, { asFont: true }),\n                }, { withNodes: true })}\n            </Button>\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, isOpen, lang, renderingRecipient, renderingModal?.gift, shouldKeepOriginalDetails]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n\nfunction getRandomAttributes(list: ApiStarGiftAttribute[], previousSelection?: Attributes): Attributes {\n  const models = list.filter((attr): attr is ApiStarGiftAttributeModel => (\n    attr.type === 'model' && attr.name !== previousSelection?.model.name\n  ));\n  const patterns = list.filter((attr): attr is ApiStarGiftAttributePattern => (\n    attr.type === 'pattern' && attr.name !== previousSelection?.pattern.name\n  ));\n  const backdrops = list.filter((attr): attr is ApiStarGiftAttributeBackdrop => (\n    attr.type === 'backdrop' && attr.name !== previousSelection?.backdrop.name\n  ));\n\n  const randomModel = models[Math.floor(Math.random() * models.length)];\n  const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];\n  const randomBackdrop = backdrops[Math.floor(Math.random() * backdrops.length)];\n\n  return {\n    model: randomModel,\n    pattern: randomPattern,\n    backdrop: randomBackdrop,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"LQgz8Nlx\",\"giftPreview\":\"hgs0ts_O\",\"backdrop\":\"OnBhMaBw\",\"description\":\"HBxB4QPY\",\"arrow\":\"kXTOUpfb\",\"noPassword\":\"BnqLhoKr\"};","import React from '@teact';\nimport {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { type CustomPeer, SettingsScreens } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const {\n    closeGiftWithdrawModal,\n    clearGiftWithdrawError,\n    closeGiftInfoModal,\n    processStarGiftWithdrawal,\n    openSettingsScreen,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  const handleSetUpPassword = useLastCallback(() => {\n    openSettingsScreen({\n      screen: SettingsScreens.TwoFaDisabled,\n    });\n    closeGiftWithdrawModal();\n    closeGiftInfoModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternColor={giftAttributes.backdrop?.patternColor}\n                patternIcon={giftAttributes.pattern?.sticker}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && (\n        <>\n          <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>\n          <Button className=\"mt-2\" size=\"smaller\" onClick={handleSetUpPassword}>{lang('SetUp2FA')}</Button>\n        </>\n      )}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          clearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"RdhRpsCn\",\"title\":\"yzbjj73U\",\"slider\":\"xePPMXOI\",\"description\":\"BlpfdOtK\",\"itemInfo\":\"nS9V516D\",\"itemTitle\":\"sH5Nukjy\",\"itemSubtitle\":\"dHlNODTI\",\"itemIcon\":\"H_iHihXU\",\"sendAsPeerButtonAvatar\":\"_mjvLELm\",\"sendAsPeerMenuButton\":\"zxsRaWYV\",\"buttonDownIcon\":\"zrwUUELS\",\"sendAsPeerMenuBubble\":\"X1PB6mhQ\",\"sendAsPeerMenu\":\"Px1MDij9\",\"sendAsPeersMenuContainer\":\"Al1nfhHJ\",\"headerControlPanel\":\"vu90kSL_\",\"separator\":\"uhQLUjmo\",\"checkBox\":\"Mc3bVeF0\",\"topLabel\":\"bnou4CpV\",\"top\":\"QludQDKR\",\"topBadge\":\"JBF9pTUK\",\"buttonStar\":\"NJJFuym9\",\"topPeer\":\"Ty4Ud_Rd\",\"disclaimer\":\"KRvkHeo1\"};","import React from '@teact';\nimport type { FC } from '../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiPaidReactionPrivacyType,\n  ApiPeer,\n  ApiSendAsPeerId,\n  ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectChat, selectChatMessage, selectPeer, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: ApiPaidReactionPrivacyType;\n  sendPaidReactionsAsPeerIds?: ApiSendAsPeerId[];\n  currentUserId: string;\n  currentUser: ApiUser;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMy?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiPeer;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n  sendPaidReactionsAsPeerIds,\n  currentUserId,\n  currentUser,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction, loadSendPaidReactionsAs } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldSendAsAnonymous, setShouldSendAsAnonymous] = useState(true);\n  const [sendAsPeerId, setSendAsPeerId] = useState(currentUserId);\n\n  const chatId = chat?.id;\n\n  const senderPeer = sendAsPeerId ? (selectPeer(getGlobal(), sendAsPeerId)) : currentUser;\n\n  const oldLang = useOldLang();\n  const { isMobile } = useAppLayout();\n  const lang = useLang();\n\n  const handleShowInTopSendersChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldSendAsAnonymous(!e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (chatId && !sendPaidReactionsAsPeerIds) {\n      loadSendPaidReactionsAs({ chatId });\n    }\n  }, [chatId, sendPaidReactionsAsPeerIds]);\n\n  const filteredMyReactorIds = useMemo(() => {\n    const result = sendPaidReactionsAsPeerIds?.map((peer) => peer.id)\n      .filter((id) => id !== chatId);\n    result?.unshift(currentUserId);\n    return result;\n  }, [sendPaidReactionsAsPeerIds, chatId, currentUserId]);\n\n  const canChangeSendAsPeer = filteredMyReactorIds && filteredMyReactorIds.length > 1;\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMy);\n    if (currentReactor) {\n      setShouldSendAsAnonymous(Boolean(currentReactor.isAnonymous));\n      if (currentReactor.peerId) {\n        setSendAsPeerId(currentReactor.peerId);\n      }\n      return;\n    }\n\n    setShouldSendAsAnonymous(defaultPrivacy?.type === 'anonymous' || false);\n    if (defaultPrivacy?.type === 'peer' && filteredMyReactorIds?.includes(defaultPrivacy.peerId)) {\n      setSendAsPeerId(defaultPrivacy.peerId);\n      return;\n    }\n\n    setSendAsPeerId(currentUserId);\n  }, [defaultPrivacy, message?.reactions?.topReactors, filteredMyReactorIds, currentUserId]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: shouldSendAsAnonymous,\n      peerId: shouldSendAsAnonymous || sendAsPeerId === currentUserId ? undefined : sendAsPeerId,\n      shouldIgnoreDefaultPrivacy: true,\n    });\n    closePaidReactionModal();\n  });\n\n  const handleSendAsPeerChange = useLastCallback((peerId: string) => {\n    setShouldSendAsAnonymous(false);\n    setSendAsPeerId(peerId);\n  });\n\n  const renderMenuItem = useLastCallback((peerId: string) => {\n    const peer = selectPeer(getGlobal(), peerId);\n    const isSelected = sendAsPeerId === peerId && !shouldSendAsAnonymous;\n    if (!peer) return undefined;\n\n    return (\n      <MenuItem\n        onClick={() => handleSendAsPeerChange(peerId)}\n      >\n        <Avatar\n          size=\"small\"\n          peer={peer}\n        />\n        <div className={buildClassName(styles.itemInfo)}>\n          <FullNameTitle className={styles.itemTitle} peer={peer} noFake noVerified />\n          <span className={styles.itemSubtitle}>\n            {isApiPeerUser(peer) ? lang('PeerPersonalAccount') : lang('PeerChannel')}\n          </span>\n        </div>\n        <Icon\n          className={styles.itemIcon}\n          name={isSelected ? 'check' : 'placeholder'}\n        />\n      </MenuItem>\n    );\n  });\n\n  const SendAsPeerMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={buildClassName(styles.sendAsPeerMenuButton, isOpen ? 'active' : '')}\n        onClick={onTrigger}\n        ariaLabel={lang('AccDescrOpenMenu2')}\n      >\n        <Avatar\n          className={styles.sendAsPeerButtonAvatar}\n          size=\"mini\"\n          peer={shouldSendAsAnonymous ? ANONYMOUS_PEER : senderPeer}\n        />\n        <Icon\n          name=\"down\"\n          className={styles.buttonDownIcon}\n        />\n      </Button>\n    );\n  }, [isMobile, lang, senderPeer, shouldSendAsAnonymous]);\n\n  const sendAsPeersMenu = useMemo(() => {\n    if (!canChangeSendAsPeer) return undefined;\n    return (\n      <DropdownMenu\n        className={buildClassName(styles.sendAsPeerMenu, 'with-menu-transitions')}\n        bubbleClassName={styles.sendAsPeerMenuBubble}\n        trigger={SendAsPeerMenuButton}\n        positionX=\"right\"\n        autoClose\n      >\n        {filteredMyReactorIds.map((id) => (\n          renderMenuItem(id)\n        ))}\n      </DropdownMenu>\n    );\n  }, [SendAsPeerMenuButton, filteredMyReactorIds, canChangeSendAsPeer]);\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasCurrentSender = false;\n    let myReactorAmount = 0;\n\n    all.forEach((reactor) => {\n      const peer = reactor.peerId ? selectPeer(global, reactor.peerId) : undefined;\n      if (!peer && !reactor.isAnonymous && !reactor.isMy) return;\n      if (reactor.isMy) {\n        myReactorAmount = reactor.count;\n      }\n\n      if (reactor.isMy && (reactor.peerId !== sendAsPeerId || (reactor.isAnonymous && !shouldSendAsAnonymous))) return;\n\n      const isCurrentReactor = sendAsPeerId === reactor.peerId || (shouldSendAsAnonymous && reactor.isAnonymous);\n\n      if (isCurrentReactor) {\n        hasCurrentSender = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: isCurrentReactor && isTouched ? starsAmount : 0,\n        isMy: reactor.isMy,\n        isAnonymous: reactor.isAnonymous,\n        user: peer,\n      });\n    });\n\n    if (!hasCurrentSender) {\n      const sender = selectPeer(global, sendAsPeerId);\n      result.push({\n        amount: myReactorAmount,\n        localAmount: isTouched ? starsAmount : 0,\n        isMy: true,\n        user: sender,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount, sendAsPeerId, shouldSendAsAnonymous]);\n\n  const chatTitle = chat && getPeerTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n      isLowStackPriority\n    >\n      <div className={styles.sendAsPeersMenuContainer}>\n        {sendAsPeersMenu}\n      </div>\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMy && shouldSendAsAnonymous))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey)\n              : peer && getPeerTitle(oldLang, peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      {topReactors && (<Separator className={styles.separator} />)}\n      <Checkbox\n        className={buildClassName(styles.checkBox, 'dialog-checkbox')}\n        checked={!shouldSendAsAnonymous}\n        onChange={handleShowInTopSendersChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        size=\"smaller\"\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig?.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n    const sendPaidReactionsAsPeerIds = chat?.sendPaidReactionsAsPeerIds;\n    const currentUserId = global.currentUserId!;\n    const currentUser = selectUser(global, currentUserId)!;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n      sendPaidReactionsAsPeerIds,\n      currentUserId,\n      currentUser,\n    };\n  },\n)(PaidReactionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"CuBAw2yg\",\"slider\":\"euOOAbZi\",\"sparkles\":\"_L1YQTIP\",\"progress\":\"kwK0cNPX\",\"floatingBadgeWrapper\":\"uvlMoXj0\",\"floatingBadge\":\"BGSDWAYc\",\"floatingBadgeText\":\"qqQan8uF\",\"floatingBadgeTriangle\":\"mIdJOmsB\"};","import React from '@teact';\nimport {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport { requestMeasure, requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  className?: string;\n  onChange: (value: number) => void;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  className,\n  onChange,\n}: OwnProps) => {\n  const floatingBadgeRef = useRef<HTMLDivElement>();\n\n  const points = useMemo(() => {\n    const result = [];\n    for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n      if (DEFAULT_POINTS[i] < maxValue) {\n        result.push(DEFAULT_POINTS[i]);\n      }\n\n      if (DEFAULT_POINTS[i] >= maxValue) {\n        result.push(maxValue);\n        break;\n      }\n    }\n\n    return result;\n  }, [maxValue]);\n\n  const [value, setValue] = useState(0);\n\n  useEffectOnce(() => {\n    setValue(getProgress(points, defaultValue));\n  });\n\n  const updateSafeBadgePosition = useLastCallback(() => {\n    const badge = floatingBadgeRef.current;\n    if (!badge) return;\n    const parent = badge.parentElement!;\n\n    requestMeasure(() => {\n      const safeMinX = parent.offsetLeft + badge.offsetWidth / 2;\n      const safeMaxX = parent.offsetLeft + parent.offsetWidth - badge.offsetWidth / 2;\n\n      requestMutation(() => {\n        parent.style.setProperty('--_min-x', `${safeMinX}px`);\n        parent.style.setProperty('--_max-x', `${safeMaxX}px`);\n      });\n    });\n  });\n\n  useResizeObserver(floatingBadgeRef, updateSafeBadgePosition);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = Number(event.currentTarget.value);\n    setValue(newValue);\n\n    onChange(getValue(points, newValue));\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} style={`--progress: ${value / points.length}`}>\n      <div className={styles.floatingBadgeWrapper}>\n        <div className={styles.floatingBadge} ref={floatingBadgeRef}>\n          <div className={styles.floatingBadgeText}>\n            <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n            <AnimatedCounter text={formatInteger(getValue(points, value))} />\n          </div>\n          <svg className={styles.floatingBadgeTriangle} width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\">\n            <defs>\n              <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n              </linearGradient>\n            </defs>\n            <path d=\"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z\" fill=\"url(#StarBadgeTriangle)\" />\n          </svg>\n        </div>\n      </div>\n      <div className={styles.progress}>\n        <Sparkles preset=\"progress\" className={styles.sparkles} />\n      </div>\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue)}\n        step=\"any\"\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nfunction getProgress(points: number[], value: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nexport default memo(StarSlider);\n","import React from '@teact';\nimport type { FC } from '../../../lib/teact/teact';\nimport { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarsAmount } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { convertTonFromNanos } from '../../../util/formatCurrency';\nimport { formatStarsAsText, formatTonAsText } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\n\nimport ConfirmDialog from '../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['priceConfirmModal'];\n};\n\ntype StateProps = {\n  starBalance?: ApiStarsAmount;\n  tonBalance?: number;\n};\n\nconst PriceConfirmModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starBalance,\n  tonBalance,\n}) => {\n  const actions = getActions();\n\n  const lang = useLang();\n\n  const handleConfirm = useCallback(() => {\n    if (!modal?.directInfo) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    const { currency, newAmount } = modal;\n    const isTon = currency === 'TON';\n    const currentBalance = isTon ? tonBalance : starBalance?.amount;\n\n    if (currentBalance === undefined) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    if (currentBalance < newAmount!) {\n      actions.openStarsBalanceModal({\n        currency: isTon ? 'TON' : 'XTR',\n        tabId: getCurrentTabId(),\n      });\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    actions.sendStarPaymentForm({\n      directInfo: modal.directInfo,\n      tabId: getCurrentTabId(),\n    });\n    actions.closePriceConfirmModal();\n  }, [modal, starBalance, tonBalance, actions]);\n\n  const handleClose = useCallback(() => {\n    actions.closePriceConfirmModal();\n  }, [actions]);\n\n  if (!modal) {\n    return undefined;\n  }\n\n  const {\n    originalAmount,\n    newAmount,\n    currency,\n  } = modal;\n\n  const isTon = currency === 'TON';\n\n  let originalAmountText: string;\n  let newAmountText: string;\n\n  if (isTon) {\n    originalAmountText = formatTonAsText(lang, convertTonFromNanos(originalAmount!));\n    newAmountText = formatTonAsText(lang, convertTonFromNanos(newAmount!));\n  } else {\n    originalAmountText = formatStarsAsText(lang, originalAmount!);\n    newAmountText = formatStarsAsText(lang, newAmount!);\n  }\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(modal)}\n      onClose={handleClose}\n      title={lang('PriceChanged')}\n      confirmHandler={handleConfirm}\n      confirmLabel={lang('PayNewPrice')}\n    >\n      <p>\n        {lang('PriceChangedText', {\n          originalAmount: originalAmountText,\n          newAmount: newAmountText,\n        }, {\n          withMarkdown: true,\n          withNodes: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const starBalance = global.stars?.balance;\n  const tonBalance = global.ton?.balance?.amount;\n\n  return {\n    starBalance,\n    tonBalance,\n  };\n},\n)(PriceConfirmModal));\n","import React from '@teact';\nimport { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit } from '../../../util/formatCurrency';\n\nimport useLang from '../../../hooks/useLang';\n\nimport BadgeButton from '../../common/BadgeButton';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiTypeCurrencyAmount;\n  withAddButton?: boolean;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className, withAddButton }: OwnProps) => {\n  const lang = useLang();\n\n  const {\n    openStarsBalanceModal,\n  } = getActions();\n\n  const renderStarsAmount = () => {\n    return (\n      <>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {balance !== undefined && balance.currency === STARS_CURRENCY_CODE\n          ? formatStarsAmount(lang, balance) : ''}\n        {withAddButton && (\n          <BadgeButton\n            className={styles.addStarsButton}\n            onClick={() => openStarsBalanceModal({})}\n          >\n            <Icon\n              className={styles.addStarsIcon}\n              name=\"add\"\n            />\n          </BadgeButton>\n        )}\n      </>\n    );\n  };\n\n  const renderTonAmount = () => {\n    return (\n      <>\n        <Icon name=\"toncoin\" />\n        {balance !== undefined ? convertCurrencyFromBaseUnit(balance.amount, balance.currency) : ''}\n      </>\n    );\n  };\n\n  return (\n    <div className={buildClassName(styles.balanceBlock, className)}>\n      <div className={styles.balanceInfo}>\n        <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n        <div className={styles.balanceBottom}>\n          {balance?.currency === TON_CURRENCY_CODE ? renderTonAmount() : renderStarsAmount()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TtE8LQNJ\",\"minimal\":\"nkV4JXHc\",\"transition\":\"nXQS4E59\",\"main\":\"JuWZY1ds\",\"container\":\"mnhBs1uK\",\"section\":\"lYkNd_gb\",\"lastSection\":\"f749AI4g\",\"sectionTitle\":\"FF8gm7MP\",\"hint\":\"Rs8WXoOz\",\"tos\":\"Vu6blJk9\",\"topUpButton\":\"dc_DZoVF\",\"tonBalanceContainer\":\"lorbW9II\",\"tonBalance\":\"h2Fs3tOv\",\"tonIconBalance\":\"Ut6GidJP\",\"tonInUsd\":\"FdcdsB4l\",\"tonIconLogo\":\"_hCjjyEv\",\"description\":\"teXilLxe\",\"header\":\"fnhXotO2\",\"starHeaderText\":\"iUwego5s\",\"botItem\":\"AhxcrKWn\",\"hiddenHeader\":\"DZk6d6hF\",\"closeButton\":\"piD1PXHW\",\"addStarsButton\":\"dqnGL2uh\",\"addStarsIcon\":\"w9Db2eiK\",\"balanceBlock\":\"Yk0OQBKC\",\"balanceInfo\":\"p2dW9NOV\",\"smallerText\":\"rUnPcfmE\",\"balanceBottom\":\"F5BTkZ9G\",\"modalBalance\":\"t8tMrx3y\",\"starButton\":\"oOt4VBD2\",\"paymentContent\":\"OReEUNTV\",\"paymentImages\":\"oKorQYTC\",\"paymentPhoto\":\"HGTrEtUF\",\"avatarStar\":\"Wu10dXoa\",\"paymentImageBackground\":\"os8jb_qv\",\"paymentButton\":\"VzR5cibf\",\"paymentButtonStar\":\"Uhg7yWxK\",\"transactions\":\"Qvc0fTTH\",\"subscriptions\":\"IX5BhCUF\",\"tabs\":\"KZVEyKOX\",\"disclaimer\":\"bpVifdwH\",\"amountBadge\":\"BPM7LKwo\",\"loadMore\":\"TKmZjMyd\",\"loadMoreIcon\":\"buepwtN1\"};","import React from '@teact';\nimport { memo, useEffect, useMemo, useState } from '@teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { AnimationLevel } from '../../../types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport {\n  PAID_MESSAGES_PURPOSE,\n  STARS_CURRENCY_CODE,\n  TON_CURRENCY_CODE,\n  TON_TOPUP_URL_DEFAULT,\n  TON_USD_RATE_DEFAULT,\n} from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport { selectSharedSettings } from '../../../global/selectors/sharedState.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit, convertTonToUsd, formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { resolveTransitionName } from '../../../util/resolveTransitionName.ts';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport ParticlesHeader from '../common/ParticlesHeader.tsx';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  tonBalanceState?: GlobalState['ton'];\n  canBuyPremium?: boolean;\n  shouldForceHeight?: boolean;\n  tonUsdRate?: number;\n  tonTopupUrl: string;\n  animationLevel: AnimationLevel;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, tonBalanceState, canBuyPremium, shouldForceHeight, tonUsdRate, tonTopupUrl, animationLevel,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n    openUrl,\n  } = getActions();\n\n  const currency = modal?.currency || STARS_CURRENCY_CODE;\n  const currentState = currency === TON_CURRENCY_CODE ? tonBalanceState : starsBalanceState;\n  const { balance, history } = currentState || {};\n  const { subscriptions } = (currency === STARS_CURRENCY_CODE && starsBalanceState) || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const isOpen = Boolean(modal && (starsBalanceState || tonBalanceState));\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    if (topup?.purpose === PAID_MESSAGES_PURPOSE) {\n      return lang('StarsNeededTextSendPaidMessages', undefined, {\n        withMarkdown: true,\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const modalHeight = useMemo(() => {\n    const transactionCount = history?.all?.transactions.length || 0;\n    if (transactionCount == 1) {\n      return '35.5rem';\n    }\n    if (transactionCount == 2) {\n      return '39.25rem';\n    }\n    if (transactionCount == 3) {\n      return '43rem';\n    }\n    return '45rem';\n  }, [history?.all?.transactions.length]);\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  const renderStarsHeaderSection = () => {\n    return (\n      <>\n        <ParticlesHeader\n          model=\"swaying-star\"\n          color=\"gold\"\n          title={starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          description={renderText(\n            starsNeededText || oldLang('TelegramStarsInfo'),\n            ['simple_markdown', 'emoji'],\n          )}\n          isDisabled={!isOpen}\n        />\n        {canBuyPremium && !areBuyOptionsShown && (\n          <Button\n            className={styles.starButton}\n            onClick={showBuyOptions}\n            fluid\n          >\n            {oldLang('Star.List.BuyMoreStars')}\n          </Button>\n        )}\n        {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n          <Button\n            isText\n            noForcedUpperCase\n            className={styles.starButton}\n            fluid\n            onClick={openStarsGiftingPickerModalHandler}\n          >\n            {oldLang('TelegramStarsGift')}\n          </Button>\n        )}\n        {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n          <StarTopupOptionList\n            starsNeeded={starsNeeded}\n            options={starsBalanceState.topupOptions}\n            onClick={handleBuyStars}\n          />\n        )}\n      </>\n    );\n  };\n\n  const renderTonHeaderSection = () => {\n    const tonAmount = convertCurrencyFromBaseUnit(balance?.amount || 0, TON_CURRENCY_CODE);\n    return (\n      <>\n        <ParticlesHeader\n          model=\"speeding-diamond\"\n          color=\"blue\"\n          title={lang('CurrencyTon')}\n          description={lang('DescriptionAboutTon')}\n          isDisabled={!isOpen}\n        />\n        <div className={styles.tonBalanceContainer}>\n          <div className={styles.tonBalance}>\n            <Icon name=\"toncoin\" className={styles.tonIconBalance} />\n            {tonAmount}\n          </div>\n          {Boolean(tonUsdRate) && (\n            <span className={styles.tonInUsd}>\n              {` ${formatCurrencyAsString(\n                convertTonToUsd(balance?.amount || 0, tonUsdRate, true),\n                'USD',\n                lang.code,\n              )}`}\n            </span>\n          )}\n        </div>\n        <Button\n          className={styles.topUpButton}\n          onClick={handleTonTopUp}\n          fluid\n        >\n          {lang('ButtonTopUpViaFragment')}\n        </Button>\n      </>\n    );\n  };\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n      isTon: currency === TON_CURRENCY_CODE,\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n    });\n  });\n\n  const handleTonTopUp = useLastCallback(() => {\n    openUrl({ url: tonTopupUrl, shouldSkipModal: true });\n  });\n\n  return (\n    <Modal\n      className={buildClassName(styles.root, !shouldForceHeight && !areBuyOptionsShown && styles.minimal)}\n      isOpen={isOpen}\n      onClose={closeStarsBalanceModal}\n      dialogStyle={`--modal-height: ${modalHeight}`}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          onClick={() => closeStarsBalanceModal()}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        {currency !== TON_CURRENCY_CODE && <BalanceBlock balance={balance} className={styles.modalBalance} />}\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          {currency === TON_CURRENCY_CODE ? renderTonHeaderSection() : renderStarsHeaderSection()}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {currency === TON_CURRENCY_CODE && (\n          <div className={styles.hint}>\n            {lang('TonModalHint')}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.lastSection}>\n              <Transition\n                name={resolveTransitionName('slideOptimized', animationLevel, undefined, lang.isRtl)}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                  noScrollRestoreOnTop\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const shouldForceHeight = modal?.currency === TON_CURRENCY_CODE\n      ? Boolean(global.ton?.history?.all?.transactions.length)\n      : Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      shouldForceHeight,\n      starsBalanceState: global.stars,\n      tonBalanceState: global.ton,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n      tonUsdRate: global.appConfig?.tonUsdRate || TON_USD_RATE_DEFAULT,\n      tonTopupUrl: global.appConfig?.tonTopupUrl || TON_TOPUP_URL_DEFAULT,\n      animationLevel: selectSharedSettings(global).animationLevel,\n    };\n  },\n)(StarsBalanceModal));\n","import React from '@teact';\nimport { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => Boolean(media.duration));\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={oldLang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} size=\"smaller\" onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {Boolean(disclaimerText) && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import React from '@teact';\nimport { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiUser } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectUser } from '../../../../global/selectors';\nimport { formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['chatRefundModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst ChatRefundModal = ({ modal, user }: OwnProps & StateProps) => {\n  const { closeChatRefundModal, toggleNoPaidMessagesException } = getActions();\n\n  const [shouldRefundStars, setShouldRefundStars] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingUser = useCurrentOrPrev(user);\n\n  const { starsToRefund, userId } = renderingModal || {};\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n\n  const handleConfirmRemoveFee = useLastCallback(() => {\n    closeChatRefundModal();\n    if (!userId) return;\n\n    toggleNoPaidMessagesException ({ userId, shouldRefundCharged: shouldRefundStars });\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={closeChatRefundModal}\n      title={lang('RemoveFeeTitle')}\n      confirmLabel={lang('ConfirmRemoveMessageFee')}\n      confirmHandler={handleConfirmRemoveFee}\n    >\n      {lang('ConfirmDialogMessageRemoveFee', {\n        peer: renderingUser && getPeerTitle(lang, renderingUser),\n      }, {\n        withMarkdown: true,\n        withNodes: true,\n      })}\n      {\n        Boolean(starsToRefund) && (\n          <Checkbox\n            className=\"dialog-checkbox\"\n            label={lang('ConfirmDialogRemoveFeeRefundStars', {\n              amount: formatStarsAsText(lang, starsToRefund),\n            }, {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n            checked={shouldRefundStars}\n            onCheck={setShouldRefundStars}\n          />\n        )\n      }\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.userId ? selectUser(global, modal.userId) : undefined;\n\n  return {\n    user,\n  };\n})(ChatRefundModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"MFXAwnxJ\",\"content\":\"Sl6xVf1R\",\"main\":\"bTN9Jeph\",\"headerInfo\":\"c6MiyJgW\",\"logo\":\"StGLWvzb\",\"logoBackground\":\"SyTXSfml\",\"description\":\"kFe3mIZo\",\"section\":\"BgfHkWd2\",\"header\":\"zMtAGfXs\",\"starHeaderText\":\"q3v8orGj\",\"hiddenHeader\":\"bq3FnXT0\",\"closeButton\":\"bDsDTkbe\",\"avatar\":\"jK36xUj4\",\"center\":\"v1PckUQn\",\"secondaryInfo\":\"TDWSRfP9\"};","import React from '@teact';\nimport type { FC } from '../../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/GoldStar.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          onClick={() => closeStarsGiftModal()}\n          ariaLabel={oldLang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.forUserId ? selectUser(global, modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","import type { ApiStarsAmount, ApiStarsTransaction, ApiTypeCurrencyAmount } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer, shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport {\n  type LangFn,\n} from '../../../../util/localization';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(oldLang: OldLangFn, lang: LangFn, transaction: ApiStarsTransaction) {\n  if (transaction.paidMessages) {\n    return lang(\n      'PaidMessageTransaction',\n      { count: transaction.paidMessages },\n      {\n        withNodes: true,\n        pluralValue: transaction.paidMessages,\n      },\n    );\n  }\n\n  if (transaction.isGiftResale) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftSaleTransaction')\n      : lang('StarGiftPurchaseTransaction');\n  }\n  if (transaction.isPostsSearch) {\n    return lang('PostsSearchTransaction');\n  }\n\n  if (transaction.starRefCommision) {\n    return oldLang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return oldLang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return oldLang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || oldLang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return oldLang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return oldLang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return oldLang('StarsGiftSent');\n  if (transaction.isGift) {\n    if (transaction.amount.currency === TON_CURRENCY_CODE) {\n      return lang('TonGiftReceived');\n    }\n    return oldLang('StarsGiftReceived');\n  }\n  if (transaction.starGift) {\n    return isNegativeAmount(transaction.amount) ? oldLang('Gift2TransactionSent') : oldLang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n    && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n  if (customPeer) return customPeer.title || oldLang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeStarsAmount(starsAmount: ApiStarsAmount) {\n  if (starsAmount.amount) return starsAmount.amount < 0;\n  return starsAmount.nanos < 0;\n}\n\nexport function isNegativeAmount(currencyAmount: ApiTypeCurrencyAmount) {\n  if (currencyAmount.currency === STARS_CURRENCY_CODE) {\n    return isNegativeStarsAmount(currencyAmount);\n  }\n  return currencyAmount.amount < 0;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ZXnbeQxP\",\"info\":\"zLaaDX3c\",\"status\":\"HbF2qTB2\",\"statusPricing\":\"AveGvpdV\",\"amount\":\"_CBiOQcv\",\"title\":\"k9ZIv5Pd\",\"description\":\"FlRlxMx2\",\"subtitle\":\"YN2J8dw6\",\"statusPeriod\":\"MRrP7Oew\",\"statusEnded\":\"pRHwfr8m\",\"preview\":\"t6Syyhzd\",\"subscriptionStar\":\"ftlbevPm\"};","import React from '@teact';\nimport { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"eR_RZfGB\",\"header\":\"E3R22yAI\",\"title\":\"qdydQHgc\",\"amount\":\"FI6rEJlK\",\"footer\":\"GMWMuWCr\",\"starsBackground\":\"zGCayu45\",\"subscriptionStar\":\"enRetSny\",\"amountStar\":\"J8HIcN6k\",\"secondary\":\"oBLHWBtJ\",\"danger\":\"nkwiG25Q\",\"avatarWrapper\":\"wuTMXDP9\"};","import React from '@teact';\nimport type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar\n            peer={!photo ? peer : undefined}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <InteractiveSparkles\n          className={buildClassName(styles.starsBackground)}\n          color=\"gold\"\n          onRequestAnimation={handleRequestAnimation}\n          centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            size=\"smaller\"\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jQkp75Gb\",\"preview\":\"OYGSN3PF\",\"count\":\"KX1yz2Jy\",\"thumb\":\"EvinKr5k\",\"noOutline\":\"KSAAsUDv\",\"itemCount1\":\"GxDajfX_\",\"itemCount2\":\"jXuZoxq8\",\"itemCount3\":\"TPn3XGHJ\",\"blurry\":\"hWZuxLS8\",\"full\":\"w56QPFhl\",\"fadeIn\":\"ds43W8Wq\"};","import React from '@teact';\nimport { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aHAxv_Jg\",\"info\":\"oyYrn3II\",\"stars\":\"K5lc75ku\",\"amount\":\"QLQPuLAr\",\"title\":\"e0pK8CJ_\",\"description\":\"xbERdDMQ\",\"date\":\"l6CwQ0Ev\",\"positive\":\"P_42_ZWR\",\"negative\":\"TGjnLJfH\",\"preview\":\"cnjGihOT\",\"subscriptionStar\":\"z43YvnDX\",\"uniqueGiftBackground\":\"eNvzMw2p\",\"giftSticker\":\"U3dqmnM4\"};","import React from '@teact';\nimport { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst GIFT_STICKER_SIZE = 36;\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    amount,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n  const starGift = transaction.starGift;\n  const isUniqueGift = starGift?.type === 'starGiftUnique';\n  const giftSticker = starGift && getStickerFromGift(starGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, lang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (!shouldUseCustomPeer(transaction)) {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if (transaction.isGiftUpgrade && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isGiftResale && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isPostsSearch) {\n      title = getTransactionTitle(oldLang, lang, transaction);\n      description = undefined;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, lang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (isUniqueGift) {\n      const { backdrop } = getGiftAttributes(starGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.giftSticker}\n            sticker={giftSticker}\n            size={GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (giftSticker) {\n      return (\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={GIFT_STICKER_SIZE}\n          play={false}\n        />\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [isUniqueGift, extendedMedia, photo, data.avatarPeer, subscriptionPeriod, starGift, giftSticker]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && `  (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, amountColorClass)}\n        >\n          {formatStarsTransactionAmount(lang, amount)}\n        </span>\n        {amount.currency === STARS_CURRENCY_CODE && <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />}\n        {amount.currency === TON_CURRENCY_CODE && <Icon name=\"toncoin\" className={amountColorClass} />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"IzhfRIWu\",\"positive\":\"jvBZSrpd\",\"negative\":\"xDyq9cc0\",\"header\":\"qBOIq6Jn\",\"uniqueGift\":\"ApoQz22o\",\"amount\":\"sso9uZM6\",\"title\":\"ZZAj3hj7\",\"description\":\"NuWOY7ED\",\"tid\":\"tMF8VIOM\",\"refunded\":\"sxWAwxTd\",\"totalStars\":\"Z2YALGgl\",\"starIcon\":\"cU5QlvwL\",\"footer\":\"KgzPpgS6\",\"starsBackground\":\"nML8IQqX\",\"copyIcon\":\"voCttFzS\",\"mediaPreview\":\"C5r59yiV\",\"subtitle\":\"mFYcIYMJ\",\"starGiftSticker\":\"j3akHdtm\",\"avatar\":\"hcrszlpT\"};","import React from '@teact';\nimport type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../../config';\nimport { getMessageLink } from '../../../../global/helpers';\nimport {\n  buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer,\n} from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectGiftStickerForTon,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n  paidMessageCommission?: number;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal,\n  peer,\n  canPlayAnimatedEmojis,\n  topSticker,\n  paidMessageCommission,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, amount, isGiftUpgrade, starGift, isGiftResale,\n      starRefCommision,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n      && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, lang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId ? getMessageLink(peer, undefined, giveawayPostId) : undefined;\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || (isGiftUpgrade && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker && !transaction.isPostsSearch;\n    const avatarPeer = !photo ? ((!shouldUseCustomPeer(transaction) && peer) || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n          resellPrice={transaction.amount}\n        />\n      </div>\n    );\n\n    const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar\n            className={styles.avatar}\n            peer={avatarPeer}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n        )}\n        {!sticker && !transaction.isPostsSearch && (\n          <InteractiveSparkles\n            className={buildClassName(styles.starsBackground)}\n            color=\"gold\"\n            onRequestAnimation={handleRequestAnimation}\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n          />\n        )}\n        {Boolean(title) && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, amountColorClass)}\n          >\n            {formatStarsTransactionAmount(lang, amount)}\n          </span>\n          {amount.currency === STARS_CURRENCY_CODE && <StarIcon type=\"gold\" size=\"middle\" />}\n          {amount.currency === 'TON' && <Icon name=\"toncoin\" className={amountColorClass} />}\n          {transaction.isRefund && (\n            <p className={styles.refunded}>{lang('Refunded')}</p>\n          )}\n        </p>\n        {Boolean(transaction.paidMessages && transaction.starRefCommision && paidMessageCommission) && (\n          <p className={styles.description}>\n            {lang(\n              'PaidMessageTransactionDescription',\n              { percent: formatPercent(paidMessageCommission! / 10) },\n              {\n                withNodes: true,\n                withMarkdown: true,\n              },\n            )}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction && starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    if (isGiftResale) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        isNegativeAmount(transaction.amount)\n          ? lang('StarGiftSaleTransaction')\n          : lang('StarGiftPurchaseTransaction'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeAmount(amount) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    if (!transaction.isPostsSearch) {\n      tableData.push([\n        peerLabel,\n        peerId ? { chatId: peerId } : toName || '',\n      ]);\n    }\n\n    if (transaction.starRefCommision && transaction.paidMessages) {\n      tableData.push([\n        lang('PaidMessageTransactionTotal'),\n        formatStarsAsIcon(lang,\n          transaction.amount.amount / ((100 - transaction.starRefCommision) / 100),\n          { asFont: false, className: styles.starIcon, containerClassName: styles.totalStars }),\n      ]);\n    }\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink && transaction.amount.currency === STARS_CURRENCY_CODE) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.amount, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker,\n    paidMessageCommission, handleRequestAnimation]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n    const paidMessageCommission = global.appConfig?.starsPaidMessageCommissionPermille;\n\n    const currencyAmount = modal?.transaction.amount;\n    const starsGiftSticker = modal?.transaction.isGift\n      ? (currencyAmount?.currency === STARS_CURRENCY_CODE ? selectGiftStickerForStars(global, currencyAmount?.amount)\n        : selectGiftStickerForTon(global, currencyAmount?.amount)) : undefined;\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n      paidMessageCommission,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","import {\n  getIsHeavyAnimating, useCallback, useRef, useState,\n} from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useRunDebounced from './useRunDebounced';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function useDebouncedMemo<R, D extends unknown[]>(\n  resolverFn: () => R, ms: number, dependencies: D,\n): R | undefined {\n  const [value, setValue] = useState<R>();\n  const { isFrozen, updateWhenUnfrozen } = useHeavyAnimationFreeze();\n  const runDebounced = useRunDebounced(ms, true);\n\n  useSyncEffect(() => {\n    if (isFrozen) {\n      updateWhenUnfrozen();\n      return;\n    }\n\n    runDebounced(() => {\n      setValue(resolverFn());\n    });\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [...dependencies, isFrozen]);\n\n  return value;\n}\n\nfunction useHeavyAnimationFreeze() {\n  const isPending = useRef(false);\n\n  const updateWhenUnfrozen = useCallback(() => {\n    isPending.current = true;\n  }, []);\n\n  const forceUpdate = useForceUpdate();\n  const handleUnfreeze = useCallback(() => {\n    if (!isPending.current) {\n      return;\n    }\n\n    isPending.current = false;\n    forceUpdate();\n  }, [forceUpdate]);\n  useHeavyAnimation(noop, handleUnfreeze);\n\n  return {\n    isFrozen: getIsHeavyAnimating(),\n    updateWhenUnfrozen,\n  };\n}\n\nfunction noop() {\n}\n","import { useState } from '../lib/teact/teact';\n\nimport type { ApiChat } from '../api/types';\n\nimport { callApi } from '../api/gramjs';\nimport useAsync from './useAsync';\nimport useDebouncedMemo from './useDebouncedMemo';\nimport useLastCallback from './useLastCallback';\n\nconst DEBOUNCE_TIMEOUT = 300;\n\nexport async function peerGlobalSearch(query: string) {\n  const searchResult = await callApi('searchChats', { query });\n  if (!searchResult) return undefined;\n\n  const ids = [...searchResult.accountResultIds, ...searchResult.globalResultIds];\n\n  return ids;\n}\n\nexport function prepareChatMemberSearch(chat: ApiChat) {\n  return async (query: string) => {\n    const searchResult = await callApi('fetchMembers', {\n      chat,\n      memberFilter: 'search',\n      query,\n    });\n\n    return searchResult?.members?.map((member) => member.userId) || [];\n  };\n}\n\nexport default function usePeerSearch({\n  query,\n  queryFn = peerGlobalSearch,\n  defaultValue,\n  debounceTimeout = DEBOUNCE_TIMEOUT,\n  isDisabled,\n}: {\n  query: string;\n  queryFn?: (query: string) => Promise<string[] | undefined>;\n  defaultValue?: string[];\n  debounceTimeout?: number;\n  isDisabled?: boolean;\n}) {\n  const debouncedQuery = useDebouncedMemo(() => query, debounceTimeout, [query]);\n  const [currentResultsQuery, setCurrentResultsQuery] = useState<string>('');\n  const searchQuery = !query ? query : debouncedQuery; // Ignore debounce if query is empty\n  const queryCallback = useLastCallback(queryFn);\n\n  const result = useAsync(async () => {\n    if (!searchQuery || isDisabled) {\n      setCurrentResultsQuery('');\n      return Promise.resolve(defaultValue);\n    }\n\n    const answer = await queryCallback(searchQuery);\n    setCurrentResultsQuery(searchQuery);\n    return answer;\n  }, [searchQuery, defaultValue, queryCallback, isDisabled], defaultValue);\n\n  return {\n    ...result,\n    currentResultsQuery,\n  };\n}\n"],"names":["default","StarsGiftModal","StarsGiftingPickerModal","StarsBalanceModal","StarPaymentModal","StarsTransactionInfoModal","StarsSubscriptionModal","PaidReactionModal","GiftModal","GiftRecipientPicker","GiftInfoModal","GiftResalePriceComposerModal","GiftUpgradeModal","GiftStatusInfoModal","GiftWithdrawModal","GiftTransferModal","ChatRefundModal","PriceConfirmModal","React","memo","useMemo","getGiftAttributes","REM","AnimatedIconFromSticker","Avatar","Icon","RadialPatternBackground","styles","AVATAR_SIZE","GIFT_STICKER_SIZE","GiftTransferPreview","peer","gift","giftAttributes","undefined","createElement","className","root","giftPreview","backdrop","backgroundColors","centerColor","edgeColor","patternColor","patternIcon","pattern","sticker","size","model","name","arrow","avatar","useState","getActions","getGlobal","withGlobal","SERVICE_NOTIFICATIONS_USER_ID","isDeletedUser","isUserBot","filterPeersByQuery","unique","sortChatIds","useLastCallback","useOldLang","PeerPicker","PickerModal","isOpen","currentUserId","activeListIds","archivedListIds","userIds","closeStarsGiftingPickerModal","openStarsGiftModal","oldLang","searchQuery","setSearchQuery","displayedUserIds","usersById","users","byId","combinedIds","filteredUserIds","ids","query","type","filter","id","user","isSupport","handleSelectedUserIdsChange","newSelectedId","length","forUserId","onClose","title","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","picker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","global","chats","listIds","contactList","active","archived","useEffect","MAIN_THREAD_ID","getPeerTitle","isApiPeerUser","selectPeer","selectPeerPaidMessagesStars","selectTabState","selectTheme","selectThemeValues","selectUserFullInfo","buildClassName","buildStyle","formatCurrency","formatStarsAsIcon","useCustomBackground","useLang","PremiumProgress","ActionMessage","Button","Link","ListItem","Switcher","TextArea","LIMIT_DISPLAY_THRESHOLD","GiftComposer","giftByStars","peerId","captionLimit","theme","isBackgroundBlurred","backgroundColor","customBackground","isPaymentFormLoading","starBalance","paidMessagesStars","areUniqueStarGiftsDisallowed","shouldDisallowLimitedStarGifts","sendStarGift","sendPremiumGiftByStars","openInvoice","openGiftUpgradeModal","openStarsBalanceModal","lang","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","shouldPayByStars","setShouldPayByStars","customBackgroundValue","isStarGift","isPremiumGift","hasPremiumByStars","isPeerUser","isSelf","localMessage","currentGift","chatId","isOutgoing","senderId","date","Math","floor","Date","now","content","action","mediaType","amount","currency","months","message","text","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","fromId","handleGiftMessageChange","e","target","value","handleShouldHideNameChange","handleShouldPayForUpgradeChange","toggleShouldPayByStars","handleOpenUpgradePreview","giftId","handleGetMoreStars","handleMainButtonClick","shouldUpgrade","userId","option","canUseStarsPayment","renderOptionsSection","symbolsLeft","optionsSection","messageInput","onChange","label","maxLength","maxLengthIndicator","toString","switcher","narrow","ripple","onClick","stars","switcherStarIcon","withNodes","checked","description","link","isPrimary","withMarkdown","Boolean","disabled","receiver","renderFooter","asFont","footer","availabilityRemains","progress","availabilityTotal","rightText","count","leftText","limited","mainButton","isLoading","bgClassName","background","withTransition","customBgImage","customBgColor","blurred","actionMessageView","inert","style","key","threadId","appearanceOrder","spacer","isBlurred","userFullInfo","isGiftForSelf","disallowedGifts","shouldDisallowUniqueStarGifts","tabState","balance","appConfig","starGiftMaxMessageLength","selectCanPlayAnimatedEmojis","selectGiftStickerForDuration","formatCurrencyAsString","GiftRibbon","GiftItemPremium","canPlayAnimatedEmojis","baseMonthAmount","optionByStars","handleGiftClick","perMonth","discount","ceil","renderMonths","caption","pluralValue","monthsDescription","container","tabIndex","role","play","noLoop","nonInteractive","buy","pill","fluid","starsPriceBlock","starsPriceIcon","color","percent","useRef","STARS_CURRENCY_CODE","TON_CURRENCY_CODE","selectIsCurrentUserPremium","IS_TOUCH_ENV","formatTonAsIcon","getStickerFromGift","useFlag","useOnIntersect","StickerView","GiftItemStar","observeIntersection","isResale","isCurrentUserPremium","openGiftInfoModal","openPremiumModal","showNotification","ref","stickerRef","getPriceAmount","amounts","resaleTonOnly","tonAmount","find","starsAmount","isVisible","setIsVisible","isHover","markHover","unmarkHover","isGiftUnique","uniqueGift","regularGift","priceInfo","resellPrice","priceCurrency","resellMinStars","priceInStarsAsString","number","isLimited","isSoldOut","isPremiumRequired","requirePremium","isUserLimitReached","limitedPerUser","perUserRemains","perUserTotal","radialPatternBackdrop","backdropColors","radialPattern","giftNumber","giftRibbon","entry","visible","isIntersecting","starGift","premiumRequired","onMouseEnter","onMouseLeave","stickerWrapper","observeIntersectionForPlaying","observeIntersectionForLoading","containerRef","shouldLoop","shouldPreloadPreview","withSparkleEffect","shouldConvertFromNanos","star","getUserFullName","isApiPeerChat","throttle","useCurrentOrPrev","useIntersectionObserver","InteractiveSparkles","SafeLink","Modal","Transition","BalanceBlock","GiftSendingOptions","GiftModalResaleScreen","GiftResaleFilters","StarGiftCategoryList","INTERSECTION_THROTTLE","SCROLL_THROTTLE","AVATAR_SPARKLES_CENTER_SHIFT","runThrottledForScroll","cb","modal","starGiftsById","starGiftIdsByCategory","resaleGiftsCount","areResaleGiftsLoading","closeGiftModal","resetResaleGifts","loadResaleGifts","dialogRef","transitionRef","giftHeaderRef","scrollerRef","renderingModal","chat","selectedGift","setSelectedGift","selectedResellGift","setSelectedResellGift","shouldShowMainScreenHeader","setShouldShowMainScreenHeader","isMainScreenHeaderForStarGifts","setIsMainScreenHeaderForStarGifts","isGiftScreenHeaderForStarGifts","setIsGiftScreenHeaderForStarGifts","selectedCategory","setSelectedCategory","triggerSparklesRef","areAllGiftsDisallowed","shouldDisallowPremiumGifts","disallowedGiftTypes","Object","values","every","areUnlimitedStarGiftsDisallowed","shouldDisallowUnlimitedStarGifts","areLimitedStarGiftsDisallowed","allGifts","gifts","filteredGifts","sort","prevGift","giftsByStars","mapGifts","Map","forEach","starsGift","set","baseGift","reduce","prev","observe","rootRef","throttleMs","isDisabled","isResaleScreen","isGiftScreen","shouldShowHeader","isHeaderForStarGifts","handleScroll","currentTarget","scrollTop","current","top","headerTop","getBoundingClientRect","transitionTop","giftPremiumDescription","url","starGiftDescription","renderTextFilters","renderGiftPremiumHeader","headerText","center","renderGiftPremiumDescription","renderStarGiftsHeader","renderStarGiftsDescription","starGiftsDescription","recipientId","forPeerId","renderStarGifts","filteredGiftIds","starGiftsContainer","flatMap","shouldShowResale","availabilityResale","shouldDuplicateAsResale","elements","push","renderPremiumGifts","premiumGiftsGallery","map","get","onCategoryChanged","category","handleCloseModal","handleCloseButtonClick","handleAvatarMouseMove","handleRequestAnimation","animate","renderMainScreen","main","onScroll","avatars","onMouseMove","logoBackground","centerShift","onRequestAnimation","Fragment","activeKey","getCategoryKey","starGiftsTransition","isBackButton","buttonClassName","renderHeader","isFirstLoading","resaleHeaderContentContainer","resaleHeaderText","resaleHeaderDescription","commonHeaderText","isSlim","contentClassName","modalDialog","isLowStackPriority","closeButton","round","ariaLabel","withAddButton","header","resaleHeader","hiddenHeader","slideClassName","headerSlide","transition","onGiftClick","starGifts","resaleGifts","boostPerSentGift","boostsPerSentGift","idsByCategory","RESALE_GIFTS_LIMIT","LOCAL_TGS_URLS","useInfiniteScroll","AnimatedIconWithPreview","InfiniteScroll","resellGifts","areGiftsAllLoaded","areGiftsLoading","updateIteration","updateResaleGiftsFilter","resellGiftsIds","g","hasFilter","modelAttributes","patternAttributes","backdropAttributes","handleLoadMoreResellGifts","isGiftsEmpty","viewportIds","onLoadMore","handleResetGiftsFilter","renderNothingFoundGiftsWithFilter","notFoundGiftsRoot","tgsUrl","SearchingDuck","notFoundGiftsDescription","notFoundGiftsLink","resaleScreenRoot","resaleStarGiftsContainer","items","itemSelector","noFastList","preloadBackwards","scrollContainerClosest","isAllLoaded","useCallback","useContextMenuHandlers","Menu","MenuItem","SearchInput","ResaleGiftMenuAttributeSticker","attributes","counters","searchModelQuery","setSearchModelQuery","searchBackdropQuery","setSearchBackdropQuery","searchPatternQuery","setSearchPatternQuery","filteredAttributes","counter","attribute","found","attr","backdropId","documentId","filteredAndSearchedAttributes","filterBySearch","trim","item","toLowerCase","includes","sortMenuRef","isContextMenuOpen","isSortContextMenuOpen","contextMenuAnchor","sortContextMenuAnchor","handleContextMenu","handleSortContextMenu","handleContextMenuClose","handleSortContextMenuClose","handleContextMenuHide","handleSortContextMenuHide","getSortMenuElement","modelMenuRef","isModelContextMenuOpen","modelContextMenuAnchor","handleModelContextMenu","handleModelContextMenuClose","handleModelContextMenuHide","getModelMenuElement","backdropMenuRef","isBackdropContextMenuOpen","backdropContextMenuAnchor","handleBackdropContextMenu","handleBackdropContextMenuClose","handleBackdropContextMenuHide","getBackdropMenuElement","patternMenuRef","isPatternContextMenuOpen","patternContextMenuAnchor","handlePatternContextMenu","handlePatternContextMenuClose","handlePatternContextMenuHide","getPatternMenuElement","SortMenuButton","sortType","onTrigger","isMenuOpen","itemIcon","ModelMenuButton","attributesCount","BackdropMenuButton","PatternMenuButton","handleSortMenuItemClick","handleSelectedAllModelsClick","handleSelectedAllPatternsClick","handleSelectedAllBackdropsClick","handleModelMenuItemClick","modelAttribute","isActive","some","updatedAttributes","handlePatternMenuItemClick","patternAttribute","handleBackdropMenuItemClick","backdropAttribute","renderSortMenuItems","icon","menuItemText","menuItemIcon","renderSortMenu","anchor","menu","left","getMenuElement","autoClose","onCloseAnimationEnd","positionX","handleSearchModelInputReset","handleSearchBackdropInputReset","handleSearchPatternInputReset","handleSearchInputClick","stopPropagation","preventDefault","modelMenuItemsContainerRef","renderModelMenuItems","models","selectedAttributes","isSelectedAll","menuContentContainer","search","onReset","placeholder","isSelected","menuItemStickerText","renderModelMenu","renderBackdropMenuItems","backdrops","backdropAttributeMenuItemText","renderBackdropMenu","right","renderPatternMenuItems","patterns","renderPatternMenu","buttonsContainer","useDynamicColorListener","ATTRIBUTE_STICKER_SIZE","customColor","thumbClassName","thumb","useHorizontalScroll","StarIcon","starCategories","keys","Number","a","b","hasResale","handleItemClick","renderCategoryName","renderCategoryItem","selectedItem","isInteger","list","formatStarsTransactionAmount","useTransitionActiveKey","STICKER_SIZE","UniqueGiftHeader","subtitle","subtitlePeer","openChat","subtitleColor","textColor","transitionSlide","direction","subtitleBadge","getHasAdminRight","getMainUsername","selectUser","copyTextToClipboard","formatDateTimeToString","formatStarsAsText","formatTonAsText","CUSTOM_PEER_HIDDEN","getServerTime","formatPercent","renderTextWithEntities","BadgeButton","GiftMenuItems","Checkbox","ConfirmDialog","DropdownMenu","TableInfoModal","fromPeer","targetPeer","releasedByPeer","starGiftMaxConvertPeriod","hasAdminRights","currentUserEmojiStatus","collectibleEmojiStatuses","tonExplorerUrl","currentUser","recipientPeer","closeGiftInfoModal","changeGiftVisibility","convertGiftToStars","openChatWithInfo","focusMessage","buyStarGift","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","isConfirmModalOpen","setIsConfirmModalOpen","shouldPayInTon","setShouldPayInTon","renderingFromPeer","renderingTargetPeer","isTargetChat","typeGift","isSavedGift","savedGift","isSender","canConvertDifference","conversionLeft","giftSticker","hasConvertOption","giftSubtitle","releasedByUsername","ownerTitle","fallbackText","owner","canFocusUpgrade","upgradeMsgId","canManage","inputGift","getResalePrice","confirmPrice","canBuyGift","ownerId","giftOwnerTitle","ownerName","handleClose","handleFocusUpgraded","giftChat","messageId","handleTriggerVisibility","isUnsaved","shouldUnsave","handleConvertToStars","handleOpenUpgradeModal","handleBuyGift","closeConfirmModal","handleConfirmBuyGift","price","slug","SettingsMenuButton","headerButton","renderFooterButton","noForcedUpperCase","isShiny","upgradeIcon","saleDateInfo","firstSaleDate","code","lastSaleDate","modalData","isConverted","canConvert","isVisibleForMe","getTitle","uniqueGiftContextMenu","trigger","uniqueGiftModalHeader","modalHeader","giftResalePriceContainer","giftResalePriceStar","headerSplitButton","moreIcon","uniqueGiftHeader","regularHeader","soldOut","tableData","hasFrom","unknown","titleKey","starsValue","giftValue","starAmountIcon","total","ownerAddress","ownerPeer","originalDetails","copyIcon","withEmojiStatus","uniqueAttribute","rarityPercent","issued","issuedCount","totalCount","recipient","sender","formattedDate","recipientLink","senderLink","tonLink","giftAddress","footerDescription","shouldSkipModal","hasBackdrop","withBalanceBar","currencyInBalanceBar","noDefaultTitle","confirmLabel","confirmHandler","checkBox","onCheck","checkBoxDescription","emojiStatus","statuses","releasedByPeerId","selectCanGift","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","filteredPeerIds","selectedId","forceShowSelf","convertTonFromNanos","convertTonToNanos","convertTonToUsd","InputText","starsStargiftResaleCommissionPermille","starsStargiftResaleAmountMin","starsStargiftResaleAmountMax","starsUsdWithdrawRate","tonStargiftResaleCommissionPermille","tonStargiftResaleAmountMin","tonStargiftResaleAmountMax","tonUsdRate","closeGiftResalePriceComposerModal","updateStarGiftPrice","setPrice","isPriceInTon","setIsPriceInTon","hasPrice","handleChangePrice","parseFloat","maxAmount","result","isNaN","min","handleSellGift","nanos","variables","commission","minAmount","isPriceCorrect","inputPrice","inputMode","teactExperimentControlled","inputPriceDescription","priceWithCommission","toFixed","descriptionPrice","configPermille","starsUsdWithdrawRateX1000","tonConfigPermille","maxTonFromConfig","useCustomEmoji","FullNameTitle","TableAboutModal","closeGiftStatusInfoModal","setEmojiStatus","patternDocumentId","onWearClick","customEmoji","mockPeerWithStatus","profileBlock","userTitle","noFake","noVerified","statusSparklesColor","status","titleContainer","giftTitle","infoDescription","listItemData","lockIcon","ALL_FOLDER_ID","MEMO_EMPTY_ARRAY","useFolderManagerForOrderedIds","usePeerSearch","contactIds","closeGiftTransferModal","openGiftWithdrawModal","transferGift","setSelectedId","renderingSelectedPeerId","renderingSelectedPeer","orderedChatIds","sortedLocalIds","foundIds","currentResultsQuery","defaultValue","categories","isCustomPeer","avatarIcon","peerColorId","handleCategoryChange","displayIds","handleTransfer","transferStars","ignoreFreeze","onSelectedCategoryChange","withPeerUsernames","noScrollRestore","ApiMediaFormat","getStickerMediaHash","fetch","useInterval","PREVIEW_UPDATE_INTERVAL","closeGiftUpgradeModal","upgradeGift","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","previewAttributes","setPreviewAttributes","handleUpgrade","updatePreviewAttributes","sampleAttributes","getRandomAttributes","patternStickers","modelStickers","mediaHashes","hash","BlobUrl","footerButton","previousSelection","randomModel","random","randomPattern","randomBackdrop","SettingsScreens","getDays","PasswordForm","FRAGMENT_PEER","customPeerAvatarColor","hasPassword","passwordHint","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","openSettingsScreen","shouldShowPassword","setShouldShowPassword","exportDelay","canExportAt","max","handleSubmit","password","handleSetUpPassword","screen","TwoFaDisabled","exportHint","days","noPassword","shouldShowSubmit","error","errorKey","withRegular","clearError","hint","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","settings","byKey","twoFaSettings","STARS_ICON_PLACEHOLDER","selectChat","selectChatMessage","formatInteger","renderText","useAppLayout","PeerBadge","Separator","StarSlider","MAX_TOP_REACTORS","DEFAULT_STARS_AMOUNT","MAX_REACTION_AMOUNT","ANONYMOUS_PEER","defaultPrivacy","sendPaidReactionsAsPeerIds","closePaidReactionModal","addLocalPaidReaction","loadSendPaidReactionsAs","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldSendAsAnonymous","setShouldSendAsAnonymous","sendAsPeerId","setSendAsPeerId","senderPeer","isMobile","handleShowInTopSendersChange","handleAmountChange","filteredMyReactorIds","unshift","canChangeSendAsPeer","currentReactor","reactions","topReactors","reactor","isMy","isAnonymous","handleSend","isPrivate","shouldIgnoreDefaultPrivacy","handleSendAsPeerChange","renderMenuItem","itemInfo","itemTitle","itemSubtitle","SendAsPeerMenuButton","sendAsPeerMenuButton","sendAsPeerButtonAvatar","buttonDownIcon","sendAsPeersMenu","sendAsPeerMenu","bubbleClassName","sendAsPeerMenuBubble","all","hasCurrentSender","myReactorAmount","isCurrentReactor","localAmount","slice","chatTitle","hasAbsoluteCloseButton","sendAsPeersMenuContainer","headerControlPanel","modalBalance","slider","maxValue","topLabel","countText","topPeer","badgeText","badgeIcon","badgeClassName","topBadge","separator","specialReplacement","buttonStar","disclaimer","paidReactionMaxAmount","paidReactionPrivacy","requestMeasure","requestMutation","useEffectOnce","useResizeObserver","AnimatedCounter","Sparkles","DEFAULT_POINTS","floatingBadgeRef","points","i","setValue","getProgress","updateSafeBadgePosition","badge","parent","parentElement","safeMinX","offsetLeft","offsetWidth","safeMaxX","setProperty","handleChange","event","newValue","getValue","floatingBadgeWrapper","floatingBadge","floatingBadgeText","floatingBadgeIcon","floatingBadgeTriangle","width","height","viewBox","fill","x1","x2","y1","y2","offset","d","preset","sparkles","step","pointIndex","findIndex","point","prevPoint","nextPoint","getCurrentTabId","tonBalance","actions","handleConfirm","directInfo","closePriceConfirmModal","newAmount","isTon","currentBalance","tabId","sendStarPaymentForm","originalAmount","originalAmountText","newAmountText","ton","formatStarsAmount","convertCurrencyFromBaseUnit","renderStarsAmount","addStarsButton","addStarsIcon","renderTonAmount","balanceBlock","balanceInfo","smallerText","balanceBottom","PAID_MESSAGES_PURPOSE","TON_TOPUP_URL_DEFAULT","TON_USD_RATE_DEFAULT","getChatTitle","selectIsPremiumPurchaseBlocked","selectSharedSettings","resolveTransitionName","TabList","ParticlesHeader","StarTopupOptionList","StarsSubscriptionItem","StarsTransactionItem","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","SUBSCRIPTION_PURPOSE","starsBalanceState","tonBalanceState","canBuyPremium","shouldForceHeight","tonTopupUrl","animationLevel","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","openUrl","currentState","history","subscriptions","isHeaderHidden","setHeaderHidden","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","bot","botId","purpose","shouldShowItems","transactions","shouldSuggestGifting","modalHeight","transactionCount","transactionTabs","tosText","parts","split","renderStarsHeaderSection","starButton","isText","openStarsGiftingPickerModalHandler","topupOptions","options","handleBuyStars","renderTonHeaderSection","tonBalanceContainer","tonIconBalance","tonInUsd","topUpButton","handleTonTopUp","handleLoadMoreTransactions","handleLoadMoreSubscriptions","minimal","dialogStyle","starHeaderText","section","tos","sectionTitle","subscription","nextOffset","loadMore","loadMoreIcon","lastSection","isRtl","renderCount","shouldRestoreHeight","noScrollRestoreOnTop","transaction","isRefund","tabs","tabClassName","tab","activeTab","onSwitchTab","getCustomPeerFromInvite","usePrevious","PeerChip","PaidMediaThumb","StarsBackground","paidMediaMessage","paidMediaChat","closeStarsPaymentModal","markLoading","unmarkLoading","inputInvoice","prevModal","isBotSubscription","subscriptionPeriod","canShowPeerItem","photo","descriptionText","botName","starsText","extendedMedia","paidMedia","areAllPhotos","media","duration","areAllVideos","mediaText","channelTitle","disclaimerText","inviteCustomPeer","handlePayment","paymentContent","paymentImages","dir","paymentPhoto","avatarStar","avatarWebPhoto","avatarSize","amountBadge","paymentImageBackground","src","alt","draggable","botItem","paymentButton","messageInputInvoice","isPaidMedia","closeChatRefundModal","toggleNoPaidMessagesException","shouldRefundStars","setShouldRefundStars","renderingUser","starsToRefund","handleConfirmRemoveFee","shouldRefundCharged","StarLogo","closeStarsGiftModal","requestConfetti","selectedOption","setSelectedOption","showConfetti","dialog","querySelector","withStars","isCompleted","handleClick","renderGiftTitle","bottomText","headerInfo","logo","starsGiftOptions","secondaryInfo","buildStarsTransactionCustomPeer","shouldUseCustomPeer","getTransactionTitle","paidMessages","isGiftResale","isNegativeAmount","isPostsSearch","starRefCommision","isGiftUpgrade","isReaction","giveawayPostId","isMyGift","isGift","customPeer","isNegativeStarsAmount","currencyAmount","formatDateToString","useSelector","selectProvidedPeer","openStarsSubscriptionModal","pricing","until","isCancelled","hasExpired","preview","subscriptionStar","info","webPhoto","statusEnded","statusPricing","statusPeriod","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","starModalData","hasBotCancelled","avatarWrapper","starsBackground","amountStar","footerTos","secondary","danger","prevModalData","renderingModalData","getMediaHash","getMediaThumbUri","useMedia","MediaSpoiler","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","isTransactionPreview","isLocked","reverse","arr","realIndex","thumbDataUri","thumbnail","dataUri","SingleMediaThumb","noOutline","boughtMedia","index","video","mediaHash","mediaBlob","blurry","full","CUSTOM_PEER_PREMIUM","selectOptionalPeer","openStarsTransactionModal","transactionPeer","isUniqueGift","data","avatarPeer","subtitleKey","hasFailed","isPending","previewContent","uniqueGiftBackground","amountColorClass","negative","positive","MediaViewerOrigin","getMessageLink","selectGiftStickerForStars","selectGiftStickerForTon","StarsTransactionModal","topSticker","paidMessageCommission","openMediaViewer","closeStarsTransactionModal","handleOpenMedia","origin","StarsTransaction","standaloneMedia","toName","getStarsPeerTitleKey","messageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","mediaPreview","refunded","peerLabel","starIcon","containerClassName","totalStars","tid","footerText","footerTextParts","buttonText","starsPaidMessageCommissionPermille","starsGiftSticker","getIsHeavyAnimating","useForceUpdate","useHeavyAnimation","useRunDebounced","useSyncEffect","useDebouncedMemo","resolverFn","ms","dependencies","isFrozen","updateWhenUnfrozen","useHeavyAnimationFreeze","runDebounced","forceUpdate","handleUnfreeze","noop","callApi","useAsync","DEBOUNCE_TIMEOUT","peerGlobalSearch","searchResult","accountResultIds","globalResultIds","prepareChatMemberSearch","memberFilter","members","member","queryFn","debounceTimeout","debouncedQuery","setCurrentResultsQuery","queryCallback","Promise","resolve","answer"],"ignoreList":[],"sourceRoot":""}